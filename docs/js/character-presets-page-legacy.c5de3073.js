"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[726],{37520:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{visible:t.showExportDialog,title:t.exportPresetTitle},on:{"update:visible":function(e){t.showExportDialog=e}}},[r("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.exportPresetItemStr,callback:function(e){t.exportPresetItemStr=e},expression:"exportPresetItemStr"}}),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.showExportDialog=!1}}},[t._v("取消")]),t.canCopy?r("el-button",{attrs:{type:"primary"},on:{click:t.handleCopy}},[t._v("复制")]):t._e()],1)],1),r("el-dialog",{attrs:{visible:t.showImportDialog,title:"导入"},on:{"update:visible":function(e){t.showImportDialog=e}}},[r("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.importPresetStr,callback:function(e){t.importPresetStr=e},expression:"importPresetStr"}}),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.showImportDialog=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleImport("append")}}},[t._v("追加导入")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleImport("overwrite")}}},[t._v("覆盖导入")])],1)],1),r("el-breadcrumb",[r("el-breadcrumb-item",[t._v("预设")])],1),r("el-divider"),r("div",{staticClass:"toolbar"},[r("el-button",{attrs:{icon:"el-icon-download",circle:"",size:"small",title:"导出全部"},on:{click:t.handleExportAll}}),r("el-button",{attrs:{icon:"el-icon-upload2",circle:"",size:"small",title:"导入"},on:{click:function(e){t.showImportDialog=!0}}})],1),r("div",{staticClass:"body"},[t.isEmpty?r("el-alert",{attrs:{title:"请去Artifacts Planner页面添加预设",closable:!1}}):t._l(t.all,(function(e,o){return r("preset-item",{key:o,staticClass:"item",attrs:{item:e},on:{delete:function(e){return t.deletePreset(o)},download:function(r){return t.handleDownload(o,e)}}})}))],2)],1)},i=[],a=r(4367),s=r(62032),n=(r(47941),r(68309),r(38862),r(26833),r(20629)),l=r(7739),c={name:"CharacterPresetsPage",components:{PresetItem:l.Z},created:function(){this.canCopy=!!navigator.clipboard},data:function(){return{showExportDialog:!1,showImportDialog:!1,exportPresetTitle:"",exportPresetItemStr:"",importPresetStr:""}},methods:{checkImportType:function(t){return Object.prototype.hasOwnProperty.call(t,"data")?"multi":"single"},handleImport:function(t){var e;try{e=JSON.parse(this.importPresetStr)}catch(d){return void this.$message.error("JSON格式错误，请检查导入数据的格式或来源")}var r=[];"overwrite"===t&&(r=Object.keys(this.all));var o,i=(0,s.Z)(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;this.$store.commit("presets/delete",{name:a})}}catch(f){i.e(f)}finally{i.f()}var n=this.checkImportType(e);if("multi"===n){var l,c=(0,s.Z)(e.data);try{for(c.s();!(l=c.n()).done;){var p=l.value,u=p.name;this.$store.commit("presets/add",{name:u,value:p})}}catch(f){c.e(f)}finally{c.f()}}else if("single"===n){var m=e.name,h=e;this.$store.commit("presets/add",{name:m,value:h})}this.showImportDialog=!1},deletePreset:function(t){this.$store.commit("presets/delete",{name:t})},handleDownload:function(t,e){this.exportPresetTitle='导出预设"'.concat(t,'"'),this.exportPresetItemStr=JSON.stringify(e),this.showExportDialog=!0},handleCopy:function(){var t=this;navigator.clipboard.writeText(this.exportPresetItemStr).then((function(){t.$message("复制成功")})).catch((function(){t.$message.error("复制失败")}))},handleExportAll:function(){this.exportPresetTitle="导出全部";var t=this.all,e={data:Object.values(t)};this.exportPresetItemStr=JSON.stringify(e),this.showExportDialog=!0}},computed:(0,a.Z)((0,a.Z)({},(0,n.Se)("presets",["all"])),{},{isEmpty:function(){return 0===Object.keys(this.all).length}})},p=c,u=r(1001),m=(0,u.Z)(p,o,i,!1,null,"5202cf34",null),h=m.exports}}]);