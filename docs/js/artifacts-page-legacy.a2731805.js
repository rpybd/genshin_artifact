(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[654],{53017:function(t,e,a){"use strict";a.d(e,{Z:function(){return h}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,disabled:t.disabled,size:"small",multiple:t.multiple},on:{input:function(e){return t.$emit("input",e)}}},[t.anyOption?a("el-option",{attrs:{label:"任意",value:"any"}}):t._e(),t._l(t.allArtifactsName,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"item"},[a("img",{staticClass:"tn",attrs:{src:e.url}}),a("span",[t._v(t._s(e.chs))])])])}))],2)},n=[],r=(a(26833),a(2707),a(21249),a(73334)),s=a(4222),l=Object.values(r.oN);l.sort((function(t,e){return e.maxStar-t.maxStar}));var o=l.map((function(t){return{name:t.eng,chs:t.chs,url:(0,s.Lk)(t.eng)}})),c={name:"SelectArtifactSet",created:function(){this.allArtifactsName=o},props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},anyOption:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}}},u=c,f=a(1001),m=(0,f.Z)(u,i,n,!1,null,"26ef18cc",null),h=m.exports},84735:function(t,e,a){"use strict";a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("套装：")]),a("select-artifact-set",{attrs:{value:t.setName,"any-option":""},on:{input:t.updateSetName}})],1),a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("等级（>=）：")]),a("el-input-number",{attrs:{min:0,max:20,value:t.minLevel,size:"small"},on:{input:t.updateMinLevel}})],1)])},n=[],r=a(53017),s={name:"ArtifactsFilter",components:{SelectArtifactSet:r.Z},props:["filter"],data:function(){return{setName:"any",minLevel:0}},methods:{doUpdate:function(){this.$emit("update:filter",this.fil)},updateSetName:function(t){this.setName=t,this.doUpdate()},updateMinLevel:function(t){this.minLevel=t,this.doUpdate()}},computed:{filterSetName:function(){var t=this;return function(e){return"any"===t.setName||e.setName===t.setName}},filterMinLevel:function(){var t=this;return function(e){var a;return(null!==(a=e.level)&&void 0!==a?a:20)>=t.minLevel}},fil:function(){var t=this;return function(e){return t.filterSetName(e)&&t.filterMinLevel(e)}}}},l=s,o=a(1001),c=(0,o.Z)(l,i,n,!1,null,"75de876d",null),u=c.exports},94362:function(t,e,a){var i=a(41589),n=Math.floor,r=function(t,e){var a=t.length,o=n(a/2);return a<8?s(t,e):l(t,r(i(t,0,o),e),r(i(t,o),e),e)},s=function(t,e){var a,i,n=t.length,r=1;while(r<n){i=r,a=t[r];while(i&&e(t[i-1],a)>0)t[i]=t[--i];i!==r++&&(t[i]=a)}return t},l=function(t,e,a,i){var n=e.length,r=a.length,s=0,l=0;while(s<n||l<r)t[s+l]=s<n&&l<r?i(e[s],a[l])<=0?e[s++]:a[l++]:s<n?e[s++]:a[l++];return t};t.exports=r},68886:function(t,e,a){var i=a(88113),n=i.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},30256:function(t,e,a){var i=a(88113);t.exports=/MSIE|Trident/.test(i)},98008:function(t,e,a){var i=a(88113),n=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},44699:function(t,e,a){var i=a(19781),n=a(1702),r=a(81956),s=a(45656),l=a(55296).f,o=n(l),c=n([].push),u=function(t){return function(e){var a,n=s(e),l=r(n),u=l.length,f=0,m=[];while(u>f)a=l[f++],i&&!o(n,a)||c(m,t?[a,n[a]]:n[a]);return m}};t.exports={entries:u(!0),values:u(!1)}},38415:function(t,e,a){"use strict";var i=a(17854),n=a(19303),r=a(41340),s=a(84488),l=i.RangeError;t.exports=function(t){var e=r(s(this)),a="",i=n(t);if(i<0||i==1/0)throw l("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}},50863:function(t,e,a){var i=a(1702);t.exports=i(1..valueOf)},21249:function(t,e,a){"use strict";var i=a(82109),n=a(42092).map,r=a(81194),s=r("map");i({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},2707:function(t,e,a){"use strict";var i=a(82109),n=a(1702),r=a(19662),s=a(47908),l=a(26244),o=a(41340),c=a(47293),u=a(94362),f=a(9341),m=a(68886),h=a(30256),v=a(7392),d=a(98008),p=[],g=n(p.sort),b=n(p.push),y=c((function(){p.sort(void 0)})),C=c((function(){p.sort(null)})),_=f("sort"),T=!c((function(){if(v)return v<70;if(!(m&&m>3)){if(h)return!0;if(d)return d<603;var t,e,a,i,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)p.push({k:e+i,v:a})}for(p.sort((function(t,e){return e.v-t.v})),i=0;i<p.length;i++)e=p[i].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),k=y||!C||!_||!T,A=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:o(e)>o(a)?1:-1}};i({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&r(t);var e=s(this);if(T)return void 0===t?g(e):g(e,t);var a,i,n=[],o=l(e);for(i=0;i<o;i++)i in e&&b(n,e[i]);u(n,A(t)),a=n.length,i=0;while(i<a)e[i]=n[i++];while(i<o)delete e[i++];return e}})},56977:function(t,e,a){"use strict";var i=a(82109),n=a(17854),r=a(1702),s=a(19303),l=a(50863),o=a(38415),c=a(47293),u=n.RangeError,f=n.String,m=Math.floor,h=r(o),v=r("".slice),d=r(1..toFixed),p=function(t,e,a){return 0===e?a:e%2===1?p(t,e-1,a*t):p(t*t,e/2,a)},g=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},b=function(t,e,a){var i=-1,n=a;while(++i<6)n+=e*t[i],t[i]=n%1e7,n=m(n/1e7)},y=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=m(i/e),i=i%e*1e7},C=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=f(t[e]);a=""===a?i:a+h("0",7-i.length)+i}return a},_=c((function(){return"0.000"!==d(8e-5,3)||"1"!==d(.9,0)||"1.25"!==d(1.255,2)||"1000000000000000128"!==d(0xde0b6b3a7640080,0)}))||!c((function(){d({})}));i({target:"Number",proto:!0,forced:_},{toFixed:function(t){var e,a,i,n,r=l(this),o=s(t),c=[0,0,0,0,0,0],m="",d="0";if(o<0||o>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return f(r);if(r<0&&(m="-",r=-r),r>1e-21)if(e=g(r*p(2,69,1))-69,a=e<0?r*p(2,-e,1):r/p(2,e,1),a*=4503599627370496,e=52-e,e>0){b(c,0,a),i=o;while(i>=7)b(c,1e7,0),i-=7;b(c,p(10,i,1),0),i=e-1;while(i>=23)y(c,1<<23),i-=23;y(c,1<<i),b(c,1,1),y(c,2),d=C(c)}else b(c,0,a),b(c,1<<-e,0),d=C(c)+h("0",o);return o>0?(n=d.length,d=m+(n<=o?"0."+h("0",o-n)+d:v(d,0,n-o)+"."+v(d,n-o))):d=m+d,d}})},26833:function(t,e,a){var i=a(82109),n=a(44699).values;i({target:"Object",stat:!0},{values:function(t){return n(t)}})},70189:function(t,e,a){"use strict";var i=a(77710),n=a(95631);i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},67817:function(t,e){"use strict";e["Z"]=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"]},20758:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Ot}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("add-artifact-dialog",{attrs:{visible:t.newDialogVisible},on:{"update:visible":function(e){t.newDialogVisible=e},confirm:t.handleAddArtifact}}),a("import-json-dialog",{attrs:{visible:t.importJsonDialogVisible},on:{"update:visible":function(e){t.importJsonDialogVisible=e}}}),a("output-json-dialog",{attrs:{visible:t.outputJsonDialogVisible},on:{"update:visible":function(e){t.outputJsonDialogVisible=e}}}),a("edit-artifact-drawer",{ref:"editDrawer",attrs:{visible:t.editArtifactDrawerVisible,args:t.editArtifactArgs},on:{"update:visible":function(e){t.editArtifactDrawerVisible=e}}}),a("el-breadcrumb",[a("el-breadcrumb-item",[t._v("圣遗物")])],1),a("el-divider"),a("el-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{title:"请注意保存圣遗物数据至本地，以防意外导致数据丢失",type:"warning",closable:!1}}),a("el-tag",[t._v("数量："+t._s(t.$store.getters["artifacts/count"]))]),a("div",{staticClass:"tool-bar"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v(" 添加圣遗物 ")]),a("div",{staticClass:"tool-right"},[a("el-button",{on:{click:t.handleImportJsonClicked}},[t._v(" 导入json ")]),a("el-button",{on:{click:t.handleOutputJsonClicked}},[t._v(" 导出json ")])],1)],1),a("artifacts-filter",{staticStyle:{"margin-bottom":"16px"},attrs:{filter:t.artifactsFilter},on:{"update:filter":function(e){t.artifactsFilter=e}}}),a("div",{staticClass:"small-toolbar",staticStyle:{"margin-bottom":"16px"}},[a("el-popconfirm",{staticStyle:{"margin-right":"8px"},attrs:{title:"确定清除吗，将会同时清除圣遗物套装数据"},on:{confirm:t.handleClickDeleteAll}},[a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger",title:"清空"},slot:"reference"},[t._v(" 清空 ")])],1),a("el-button",{attrs:{size:"mini",icon:"el-icon-unlock",title:"启用全部"},on:{click:function(e){return t.$store.commit("artifacts/unlockAll")}}},[t._v("启用全部")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-unlock",circle:"",title:"锁定/解锁当前页"},on:{click:t.lockOrUnlockCurrentPage}})],1),a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.artifactsType,(function(e){return a("el-tab-pane",{key:e.name,staticClass:"panel",attrs:{name:e.name}},[a("div",{staticClass:"flex-row",attrs:{slot:"label"},slot:"label"},[a("img",{attrs:{src:e.iconURL}}),a("span",[t._v(t._s(e.chs))])]),t._l(t.filteredArtifacts[e.name],(function(i){return a("artifact",{key:i.id,staticClass:"artifact-panel",attrs:{item:i},on:{delete:function(a){return t.removeArtifact(e.name,i.id)},toggle:function(a){return t.toggleArtifact(e.name,i.id)},edit:function(a){return t.editArtifact(e.name,i.id)}}})}))],2)})),1)],1)},n=[],r=a(62032),s=(a(41539),a(57327),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"添加圣遗物",visible:t.visible,width:"80%","before-close":t.onCancel},scopedSlots:t._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:t.onCancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("确定")])]},proxy:!0}])},[a("h3",[t._v("套装")]),a("choose-artifact-set",{attrs:{value:t.setName},on:{input:t.handleSetNameChange}}),a("h3",[t._v("位置")]),a("choose-artifact-position",{attrs:{setName:t.setName},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("h3",[t._v("品质")]),a("el-rate",{attrs:{value:t.star,max:t.artifactData.maxStar},on:{input:t.handleStarChange}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex-row"},[a("h3",{staticStyle:{"margin-right":"8px"}},[t._v("等级")]),a("el-button",{attrs:{icon:"el-icon-d-arrow-left",circle:"",size:"mini",title:"0级"},on:{click:function(e){t.level=0}}}),a("el-button",{attrs:{icon:"el-icon-d-arrow-right",circle:"",size:"mini",title:"满级"},on:{click:function(e){t.level=4*t.star}}})],1),a("el-input-number",{attrs:{max:4*t.star,min:0,size:"small"},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)],1),a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("h3",[t._v("主属性")]),a("select-artifact-main-tag",{attrs:{value:t.mainTag,position:t.position},on:{input:t.handleMainTagChange}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex-row"},[a("h3",{staticStyle:{"margin-right":"8px"}},[t._v("副属性")]),a("el-button",{attrs:{icon:"el-icon-refresh",circle:"",size:"mini",title:"随机"},on:{click:t.shuffleNormalTags}}),a("el-button",{staticStyle:{padding:"0"},attrs:{icon:"el-icon-question",circle:"",title:"帮助",type:"text"},on:{click:t.openHelp}})],1),a("select-artifact-normal-tag",{model:{value:t.normalTags,callback:function(e){t.normalTags=e},expression:"normalTags"}})],1)],1)],1)}),l=[],o=(a(68309),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-artifact-set"},t._l(t.artifactsData,(function(e){return a("div",{key:e.eng,staticClass:"item",class:{active:e.eng===t.value},on:{click:function(a){return t.$emit("input",e.eng)}}},[a("el-image",{staticClass:"image",attrs:{src:t.getArtifactThumbnailURL(e.eng)}}),a("p",{staticClass:"text"},[t._v(" "+t._s(e.chs)+" ")])],1)})),0)}),c=[],u=(a(26833),a(2707),a(73334)),f=a(4222),m={name:"SetChoose",inject:["star"],created:function(){this.artifactsData=Object.values(u.oN),this.artifactsData.sort((function(t,e){return e.maxStar-t.maxStar})),this.getArtifactThumbnailURL=f.Lk},props:{value:{type:String}}},h=m,v=a(1001),d=(0,v.Z)(h,o,c,!1,null,"1bc47a68",null),p=d.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-artifact-position"},t._l(t.availablePositions,(function(e){return a("div",{key:e,staticClass:"item",class:{active:e===t.value},on:{click:function(a){return t.$emit("input",e)}}},[a("img",{staticClass:"image",attrs:{src:t.selectedArtData[e].url}}),a("p",{staticClass:"text"},[t._v(" "+t._s(t.selectedArtData[e].chs)+" ")])])})),0)},b=[],y={name:"PositionChoose",created:function(){this.artifactsData=u.oN},props:{setName:{type:String},value:{type:String}},methods:{choose:function(t){this.$emit("input",t)}},computed:{selectedArtData:function(){return this.artifactsData[this.setName]||{}},availablePositions:function(){var t=this;return["flower","feather","sand","cup","head"].filter((function(e){return Object.prototype.hasOwnProperty.call(t.selectedArtData,e)}))}},watch:{setName:function(){if(-1===this.availablePositions.indexOf(this.value)){var t=this.availablePositions[0];this.$emit("input",t)}}}},C=y,_=(0,v.Z)(C,g,b,!1,null,"bf0d2af6",null),T=_.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(4,(function(e){return a("div",{key:e,staticClass:"item"},[a("el-input",{staticClass:"input",attrs:{value:t.displayedValue[e-1],size:"small"},on:{input:function(a){return t.handleValueChange(e-1,a)}}},[a("template",{slot:"prepend"},[a("el-select",{staticClass:"prepend",attrs:{value:t.names[e-1]},on:{input:function(a){return t.handleTagChange(e-1,a)}}},t._l(t.secondaryTagData,(function(t){return a("el-option",{key:t.name,attrs:{label:t.chs,value:t.name}})})),1)],1),a("template",{slot:"append"},[t.isPercentage[e-1]?a("span",[t._v("%")]):t._e()])],2),a("el-button",{staticClass:"del-button",attrs:{icon:"el-icon-delete",circle:"",type:"text"},on:{click:function(a){return t.deleteItem(e-1)}}})],1)})),0)},A=[],x=(a(21249),a(28054)),w=a(73332),S=u.NY.map((function(t){return x.C[t]})),N={name:"SelectArtifactNormalTag",created:function(){this.secondaryTagData=S},props:{value:{type:Array,required:!0}},methods:{handleValueChange:function(t,e){if(this.value[t]){var a=(0,w.Z)(this.value);a[t].value=e,this.$emit("input",a)}},handleTagChange:function(t,e){var a=(0,w.Z)(this.value);this.value[t]&&""!==this.value[t].name?a[t].name=e:a.push({name:e,value:0}),this.$emit("input",a)},deleteItem:function(t){for(var e=[],a=0;a<this.value.length;a++)a!==t&&e.push((0,w.Z)(this.value[a]));this.$emit("input",e)}},computed:{isPercentage:function(){for(var t=[],e=0;e<4;e++)try{t.push(x.C[this.value[e].name].percentage)}catch(a){t.push(!1)}return t},displayedValue:function(){for(var t=[],e=0;e<4;e++)try{var a=this.value[e].value;t.push(a)}catch(i){t.push("0")}return t},names:function(){for(var t=[],e=0;e<4;e++)try{var a=this.value[e].name;t.push(a)}catch(i){t.push("")}return t}}},$=N,D=(0,v.Z)($,k,A,!1,null,"2b17aa78",null),Z=D.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-input",{attrs:{value:t.value.value,size:"small"},on:{input:t.handleValueChange}},[a("template",{slot:"prepend"},[a("el-select",{staticClass:"prepend",attrs:{value:t.value.name},on:{input:t.handleTagChange}},t._l(t.validTags,(function(t){return a("el-option",{key:t.name,attrs:{label:t.chs,value:t.name}})})),1)],1),a("template",{slot:"append"},[t.isPercentage?a("span",[t._v("%")]):t._e()])],2)},M=[],O={flower:u.Fb.flower.map((function(t){return x.C[t]})),feather:u.Fb.feather.map((function(t){return x.C[t]})),sand:u.Fb.sand.map((function(t){return x.C[t]})),cup:u.Fb.cup.map((function(t){return x.C[t]})),head:u.Fb.head.map((function(t){return x.C[t]}))},F={name:"SelectArtifactMainTag",props:{value:{type:Object,required:!0},position:{type:String}},methods:{handleTagChange:function(t){var e=Object.assign({},this.value);e.name=t,this.$emit("input",e)},handleValueChange:function(t){var e=Object.assign({},this.value);e.value=t,this.$emit("input",e)}},computed:{validTags:function(){return""===this.position?[]:O[this.position]},isPercentage:function(){return!!this.value.name&&x.C[this.value.name].percentage}},watch:{position:function(){if(-1===u.Fb[this.position].indexOf(this.value.name)){var t=u.Fb[this.position][0],e=Object.assign({},this.value);e.name=t,this.$emit("input",e)}}}},P=F,L=(0,v.Z)(P,j,M,!1,null,"f330b49c",null),V=L.exports,I=(a(54747),{4:{critical:[.022,.025,.028,.031],lifePercentage:[.033,.037,.042,.047],attackPercentage:[.033,.037,.042,.047],recharge:[.036,.041,.047,.052],defendPercentage:[.041,.047,.053,.058],criticalDamage:[.044,.05,.056,.062],attackStatic:[11,12,14,16],defendStatic:[13,15,17,19],elementalMastery:[13,15,17,19],lifeStatic:[167,191,215,239]},5:{critical:[.027,.031,.035,.039],lifePercentage:[.041,.047,.053,.058],attackPercentage:[.041,.047,.053,.058],recharge:[.045,.052,.058,.065],defendPercentage:[.051,.058,.066,.073],criticalDamage:[.054,.062,.07,.078],attackStatic:[14,16,18,19],defendStatic:[16,19,21,23],elementalMastery:[16,19,21,23],lifeStatic:[209,239,269,299]}});function J(){return Math.random()<.5?1:0}function E(t){var e=Math.floor(Math.random()*t.length);return t[e]}function z(t,e){return Math.floor(Math.random()*(e-t))+t}function B(t,e){for(var a=u.NY.filter((function(t){return-1===e.indexOf(t)})),i=a.length,n=[],r=0;r<t;r++){var s=z(0,i);n.push(a[s]);var l=a[s];a[s]=a[i-1],a[i-1]=l,i--}return n}function R(t,e,a){var i=I[t],n=Math.floor(e/4),r=t-2+J(),s=Math.min(4,n+r),l=B(s,a),o=[];l.forEach((function(t){o.push({name:t,value:E(i[t])})}));for(var c=n+r-4,u=0;u<c;u++){var f=z(0,o.length);o[f].value+=E(i[o[f].name])}return o}a(70189),a(78783),a(33948),a(56977);function U(t,e){return t.mainTag.name===e.mainTag.name&&t.mainTag.value===e.mainTag.value}function H(t,e){if(t.normalTags.length!==e.normalTags.length)return!1;var a,i=new Set,n=(0,r.Z)(t.normalTags);try{for(n.s();!(a=n.n()).done;){var s=a.value,l=s.name+s.value.toFixed(3);i.add(l)}}catch(m){n.e(m)}finally{n.f()}var o,c=(0,r.Z)(e.normalTags);try{for(c.s();!(o=c.n()).done;){var u=o.value,f=u.name+u.value.toFixed(3);if(!i.has(f))return!1}}catch(m){c.e(m)}finally{c.f()}return!0}function X(t,e){return t.setName===e.setName&&(t.position===e.position&&(!!U(t,e)&&!!H(t,e)))}function q(t,e){var a,i=(0,r.Z)(t);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(X(n,e))return!1}}catch(s){i.e(s)}finally{i.f()}return!0}function K(t){return t.value=(0,f.MI)(t.name,t.value),t}var W={name:"NewDialog",provide:function(){return{star:this.star}},components:{ChooseArtifactSet:p,ChooseArtifactPosition:T,SelectArtifactNormalTag:Z,SelectArtifactMainTag:V},props:{visible:{type:Boolean}},data:function(){return{setName:"archaicPetra",position:"flower",mainTag:{name:"lifeStatic",value:"4780"},normalTags:[],star:5,level:20}},methods:{handleStarChange:function(t){t>=this.artifactData.minStar&&t<=this.artifactData.maxStar&&(this.star=t,this.level=4*this.star)},handleMainTagChange:function(t){if(t.name!==this.mainTag.name){var e=x.C[t.name].max[5];this.mainTag.value=(0,f.ut)(t.name,e),this.mainTag.name=t.name}else this.mainTag=t},handleSetNameChange:function(t){this.setName=t,this.star=this.artifactData.maxStar,this.level=4*this.star},getArtifact:function(){return{setName:this.setName,position:this.position,detailName:(0,f.F_)(this.setName,this.position),mainTag:this.getArtifactMainTag(),normalTags:this.getArtifactNormalTags(),omit:this.level<16,star:this.star,level:this.level,id:0}},getArtifactMainTag:function(){var t=Object.assign({},this.mainTag);return t.value=parseFloat(t.value),isNaN(t.value)&&(t.value=0),K(t)},getArtifactNormalTags:function(){var t,e=[],a=(0,r.Z)(this.normalTags);try{for(a.s();!(t=a.n()).done;){var i=t.value;""!==i.value&&"0"!==i.value&&e.push(K({name:i.name,value:parseFloat(i.value)}))}}catch(n){a.e(n)}finally{a.f()}return e},onConfirm:function(){var t=this,e=this.getArtifact();q(this.$store.getters["artifacts/allFlat"],e)?this.$emit("confirm",e):this.$confirm("检测到已有相同圣遗物，是否继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("confirm",e)})).catch((function(){}))},onCancel:function(){this.$emit("update:visible",!1)},shuffleNormalTags:function(){for(var t=R(5,20,[this.mainTag.name]),e=0,a=t.length;e<a;e++)t[e].value=(0,f.ut)(t[e].name,t[e].value);this.normalTags=t},openHelp:function(){var t="使用随机副词条，可以快速构建大量合理的圣遗物，可以方便地确定某个角色适合什么圣遗物。例如，快速构建角斗士、乐团、魔女4件套，从而计算胡桃适合什么样的圣遗物组合";this.$alert(t,"帮助")}},computed:{artifactData:function(){return u.oN[this.setName]}}},Y=W,G=(0,v.Z)(Y,s,l,!1,null,"13ff427b",null),Q=G.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"导入json",visible:t.visible,width:"80%","before-close":t.handleClose},on:{opened:t.handleOpened}},[a("h3",{staticClass:"text"},[t._v("欢迎大佬开发第三方导出工具，json接口请参考："),a("a",{attrs:{target:"_blank",href:"https://wormtql.gitbook.io/mona-uranai/"}},[t._v("文档")])]),a("p"),a("el-input",{ref:"field",attrs:{type:"textarea",placeholder:"输入json",rows:5},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),t.supportFileReader?a("p",[t._v("*支持拖拽文件")]):t._e(),a("div",{staticClass:"buttons"},[a("el-button",{staticClass:"confirm-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.handleAppend}},[t._v(" 导入"),a("i",{staticClass:"el-icon-document-add"})]),a("el-button",{staticClass:"cancel-button",on:{click:t.handleClose}},[t._v("取消")])],1)],1)},et=[],at=a(16198),it=(a(35666),a(62479)),nt=!!window.FileReader,rt={name:"ImportJsonDialog",props:{visible:{type:Boolean}},data:function(){return{json:""}},created:function(){this.supportFileReader=nt},methods:{handleOpened:function(){var t=this;if(nt){var e=this.$refs.field.$el;e.ondrop=function(e){e.preventDefault();var a=e.dataTransfer;if(0!==a.length){var i=a.files[0],n=new FileReader;n.onload=function(e){t.json=e.target.result},n.readAsText(i)}}}},handleClose:function(){var t=this.$refs.field.$el;t.ondrop=null,this.$emit("update:visible",!1)},appendArtifacts:function(){var t=(0,it.Z)(this.json),e=t.artifacts,a=t.invalidCount;a>0&&this.$message({type:"warning",message:"有".concat(a,"个圣遗物无法识别，这些圣遗物已舍弃")}),this.$store.commit("artifacts/appendArtifactsCheckHash",e)},handleAppend:function(){this.json&&this.appendArtifacts(),this.$emit("close")},handleOverwrite:function(){var t=this;return(0,at.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.json&&t.appendArtifacts(),t.$emit("close");case 2:case"end":return e.stop()}}),e)})))()}}},st=rt,lt=(0,v.Z)(st,tt,et,!1,null,"8cb534f2",null),ot=lt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"导出json",visible:t.visible,width:"80%","before-close":t.handleClose}},[a("p",{staticClass:"text"},[t._v(" "+t._s(t.outputJson)+" ")]),a("div",{staticClass:"buttons"},[t.canCopy?a("el-button",{staticClass:"confirm-button",attrs:{type:"primary"},on:{click:t.handleCopy}},[t._v("复制")]):t._e(),a("el-button",{staticClass:"cancel-button",on:{click:t.handleClose}},[t._v("关闭")])],1)])},ut=[],ft=(a(38862),{name:"OutputJsonDialog",props:{visible:{type:Boolean}},created:function(){this.canCopy=!!navigator.clipboard},data:function(){return{json:""}},methods:{handleClose:function(){this.$emit("update:visible",!1)},handleCopy:function(){var t=this;navigator.clipboard.writeText(this.outputJson).then((function(){t.$message("复制成功")})).catch((function(){t.$message.error("复制失败")}))}},computed:{outputJson:function(){var t=this,e={};return["flower","feather","sand","cup","head"].forEach((function(a){e[a]=t.$store.state.artifacts[a]})),JSON.stringify(e)}}}),mt=ft,ht=(0,v.Z)(mt,ct,ut,!1,null,"21149ab9",null),vt=ht.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"artifact",class:{omit:t.item.omit}},[a("div",{staticClass:"up"},[a("span",{staticClass:"name"},[t._v(" "+t._s(t.displayedTitle)+" "),a("span",{staticStyle:{color:"#e7bf4f"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(t._s(t.displayedStar)+" ")])]),a("div",{staticClass:"buttons"},[a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-delete",circle:"",size:"mini",type:"text",title:"删除"},on:{click:function(e){return t.$emit("delete")}}}),a("el-button",{staticClass:"mybutton",attrs:{icon:t.item.omit?"el-icon-unlock":"el-icon-lock",circle:"",size:"mini",type:"text",title:t.item.omit?"启用":"禁用"},on:{click:function(e){return t.$emit("toggle")}}}),a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-edit",circle:"",size:"mini",type:"text",title:"编辑"},on:{click:function(e){return t.$emit("edit")}}})],1)]),a("div",{staticClass:"down"},[a("div",[a("img",{staticClass:"myimage",style:{background:t.imageBackground},attrs:{src:t.imageSrc}})]),a("div",{staticClass:"detail-div"},[a("p",{staticClass:"main-tag"},[t._v(t._s(t.mainDisplayTag))]),t._l(t.normalTags,(function(e,i){return a("p",{key:i,staticClass:"sec-tag"},[t._v(" "+t._s(e)+" ")])}))],2)])])},pt=[],gt=a(67817),bt={name:"Artifact",props:{item:{type:Object,default:function(){return{setName:"luckyDog",position:"cup",detailName:"worm666",mainTag:{name:"attackPercentage",value:.1},normalTags:[{name:"defendStatic",value:20},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3}],star:5,level:20,omit:!1}}}},computed:{displayedTitle:function(){var t=u.oN[this.item.setName],e="not exist";return t[this.item.position]&&(e=t[this.item.position].chs,Object.prototype.hasOwnProperty.call(this.item,"level")?e+="+"+this.item.level:e+="+??"),e},displayedStar:function(){return this.item.star||"??"},imageSrc:function(){var t=u.oN[this.item.setName];return t[this.item.position]?t[this.item.position].url:""},mainDisplayTag:function(){return(0,f.jH)(this.item.mainTag.name,this.item.mainTag.value)},normalTags:function(){var t,e=[],a=(0,r.Z)(this.item.normalTags);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push((0,f.jH)(i.name,i.value))}}catch(n){a.e(n)}finally{a.f()}return e},imageBackground:function(){var t,e=null!==(t=this.item.star)&&void 0!==t?t:5;return gt.Z[e-1]}}},yt=bt,Ct=(0,v.Z)(yt,dt,pt,!1,null,"436e5462",null),_t=Ct.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"编辑词条",visible:t.visible,direction:"rtl","before-close":t.handleCancel}},[this.artifact?a("div",{staticClass:"header"},[a("img",{attrs:{src:t.thumbnail.url}}),a("span",[t._v(t._s(t.thumbnail.chs))])]):t._e(),a("el-divider"),a("div",{staticStyle:{padding:"0 20px"}},[this.artifact?a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"title"},[t._v("品质")]),a("el-rate",{attrs:{value:t.star,max:t.artifactData.maxStar},on:{input:t.handleStarChange}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex-row"},[a("p",{staticClass:"title",staticStyle:{"margin-right":"8px"}},[t._v("等级")]),a("el-button",{attrs:{icon:"el-icon-d-arrow-left",circle:"",size:"mini",title:"0级"},on:{click:function(e){t.level=0}}}),a("el-button",{attrs:{icon:"el-icon-d-arrow-right",circle:"",size:"mini",title:"满级"},on:{click:function(e){t.level=4*t.star}}})],1),a("el-input-number",{attrs:{max:4*t.star,min:0,size:"small"},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)],1):t._e()],1),a("el-divider"),this.artifact?a("div",{staticClass:"main-tag"},[a("p",{staticClass:"title"},[t._v("词条")]),a("select-artifact-main-tag",{attrs:{position:t.artifact.position,value:t.mainTag},on:{input:t.handleMainTagChange}})],1):t._e(),this.artifact?a("div",{staticClass:"normal-tag"},[a("select-artifact-normal-tag",{model:{value:t.normalTags,callback:function(e){t.normalTags=e},expression:"normalTags"}})],1):t._e(),a("el-divider"),a("div",{staticClass:"buttons"},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v(" 确定 ")])],1),a("el-col",{attrs:{span:12}},[a("el-button",{on:{click:t.handleCancel}},[t._v(" 取消 ")])],1)],1)],1)],1)},kt=[],At={name:"EditArtifactDrawer",components:{SelectArtifactMainTag:V,SelectArtifactNormalTag:Z},props:{visible:{type:Boolean},args:{type:Object,default:function(){return{id:-1}}}},data:function(){return{mainTag:{name:"",value:"0"},normalTags:[{name:"",value:"0"},{name:"",value:"0"},{name:"",value:"0"},{name:"",value:"0"}],star:5,level:1}},methods:{handleStarChange:function(t){t>=this.artifactData.minStar&&t<=this.artifactData.maxStar&&(this.star=t,this.level=4*this.star)},handleMainTagChange:function(t){if(t.name!==this.mainTag.name){var e=x.C[t.name].max[5];this.mainTag.value=(0,f.ut)(t.name,e),this.mainTag.name=t.name}else this.mainTag=t},setInit:function(t){var e;this.mainTag.name=t.mainTag.name,this.mainTag.value=(0,f.ut)(t.mainTag.name,t.mainTag.value),this.normalTags=[];var a,i=(0,r.Z)(t.normalTags);try{for(i.s();!(a=i.n()).done;){var n=a.value;this.normalTags.push({name:n.name,value:(0,f.ut)(n.name,n.value)})}}catch(s){i.e(s)}finally{i.f()}this.star=5,Object.prototype.hasOwnProperty.call(t,"star")&&(this.star=t.star),this.level=null!==(e=t.level)&&void 0!==e?e:20},handleConfirm:function(){this.doUpdate(),this.$emit("close")},doUpdate:function(){var t=(0,w.Z)(this.artifact);t.mainTag.name=this.mainTag.name,t.mainTag.value=(0,f.MI)(this.mainTag.name,this.mainTag.value),t.normalTags=[];var e,a=(0,r.Z)(this.normalTags);try{for(a.s();!(e=a.n()).done;){var i=e.value;t.normalTags.push({name:i.name,value:(0,f.MI)(i.name,i.value)})}}catch(n){a.e(n)}finally{a.f()}t.level=this.level,t.star=this.star,this.$store.commit("artifacts/setArtifactById",{id:this.artifact.id,newArt:t})},handleCancel:function(){this.$emit("update:visible",!1)}},computed:{artifact:function(){var t=this.args.id;if(t<0)return null;var e=this.$store.getters["artifacts/artifactsById"];return e[t]},artifactData:function(){return u.oN[this.artifact.setName]||{}},thumbnail:function(){if(this.artifact){var t=u.oN[this.artifact.setName];return t[this.artifact.position]}return{}}}},xt=At,wt=(0,v.Z)(xt,Tt,kt,!1,null,"1d90065a",null),St=wt.exports,Nt=a(84735),$t=a(71899),Dt=a(66425),Zt={name:"ArtifactsPage",components:{AddArtifactDialog:Q,ImportJsonDialog:ot,OutputJsonDialog:vt,Artifact:_t,EditArtifactDrawer:St,ArtifactsFilter:Nt.Z},created:function(){this.artifactsIcon=u.XL,this.artifactsType=[{name:"flower",chs:"生之花",iconURL:u.XL.flower},{name:"feather",chs:"死之羽",iconURL:u.XL.feather},{name:"sand",chs:"时之沙",iconURL:u.XL.sand},{name:"cup",chs:"空之杯",iconURL:u.XL.cup},{name:"head",chs:"理之冠",iconURL:u.XL.head}]},data:function(){return{activeName:"flower",newDialogVisible:!1,importJsonDialogVisible:!1,outputJsonDialogVisible:!1,editArtifactDrawerVisible:!1,editArtifactArgs:{id:-1},artifactsFilter:function(){return!0}}},methods:{handleClickDeleteAll:function(){this.$store.commit("artifacts/removeAllArtifacts")},lockOrUnlockCurrentPage:function(){var t=this.$store.getters["artifacts/allArtifacts"][this.activeName],e=t.reduce((function(t,e){return t+(e.omit?1:0)}),0);if(e===t.length||0===e)for(var a=0;a<t.length;a++)this.$store.commit("artifacts/toggleArtifact",{position:this.activeName,index:a});else for(var i=0;i<t.length;i++)t[i].omit&&this.$store.commit("artifacts/toggleArtifact",{position:this.activeName,index:i})},removeArtifact:function(t,e){this.$store.commit("artifacts/removeArtifactById",{id:e})},toggleArtifact:function(t,e){this.$store.commit("artifacts/toggleArtifactById",{id:e})},editArtifact:function(t,e){this.editArtifactDrawerVisible=!0,this.editArtifactArgs.id=e;var a=this.$store.getters["artifacts/artifactsById"][e];this.$refs.editDrawer.setInit(a)},add:function(){this.newDialogVisible=!0},handleAddArtifact:function(t){this.newDialogVisible=!1,this.activeName=t.position,this.$store.commit("artifacts/addArtifact",t)},handleImportJsonClicked:function(){this.importJsonDialogVisible=!0},handleOutputJsonClicked:function(){this.outputJsonDialogVisible=!0}},computed:{allArtifacts:function(){return this.$store.getters["artifacts/allArtifacts"]},filteredArtifacts:function(){var t,e={},a=(0,r.Z)(Dt.Z);try{for(a.s();!(t=a.n()).done;){var i=t.value;e[i]=this.allArtifacts[i].filter(this.artifactsFilter)}}catch(n){a.e(n)}finally{a.f()}return e},estimatedTime:function(){var t=this.$store.getters["artifacts/iterCount"];return(0,$t.m)(t)}}},jt=Zt,Mt=(0,v.Z)(jt,i,n,!1,null,"e4b74694",null),Ot=Mt.exports},73332:function(t,e,a){"use strict";var i=a(62032),n=a(9726);function r(t){return Array.isArray(t)?s(t):"object"===(0,n.Z)(t)?l(t):t}function s(t){var e,a=[],n=(0,i.Z)(t);try{for(n.s();!(e=n.n()).done;){var s=e.value;a.push(r(s))}}catch(l){n.e(l)}finally{n.f()}return a}function l(t){var e={};for(var a in t)e[a]=r(t[a]);return e}e["Z"]=r},71899:function(t,e,a){"use strict";a.d(e,{m:function(){return i}});a(92222);function i(t){var e=Math.floor(.006*t/1e3);if(e<1)return"不到1秒";var a=Math.floor(e/60);return 0===a?"".concat(e,"秒"):"".concat(a,"分").concat(Math.floor(e-60*a),"秒")}},4222:function(t,e,a){"use strict";a.d(e,{F_:function(){return c},Lk:function(){return l},MI:function(){return o},jH:function(){return r},kC:function(){return f},nr:function(){return u},ut:function(){return s}});a(56977),a(47042);var i=a(28054),n=a(73334);function r(t,e){var a=i.C[t];if(!a)throw"tag name not exist";var n="";switch(t){case"attackPercentage":case"attackStatic":n="攻击力";break;case"lifePercentage":case"lifeStatic":n="生命值";break;case"defendPercentage":case"defendStatic":n="防御力";break;default:n=a.chs;break}if(a.percentage){var r=(100*e).toFixed(1);return n+"+"+r+"%"}return n+"+"+e}function s(t,e){var a=i.C[t];if(!a)throw"tag name not exist";return a.percentage?(100*e).toFixed(1):e}function l(t){var e=n.oN[t];return e["flower"]?e["flower"].url:e["head"].url}function o(t,e){var a=parseFloat(e);return i.C[t].percentage?a/100:a}function c(t,e){return n.oN[t][e].chs}function u(t){switch(t){case"flower":return"生之花";case"feather":return"死之羽";case"sand":return"时之沙";case"cup":return"空之杯";case"head":return"理之冠"}}function f(t){return t.charAt(0).toUpperCase()+t.slice(1)}},9726:function(t,e,a){"use strict";a.d(e,{Z:function(){return i}});a(82526),a(41817),a(41539),a(32165),a(78783),a(33948);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}}}]);