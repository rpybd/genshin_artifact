"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[654],{53017:function(t,e,a){a.d(e,{Z:function(){return h}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,disabled:t.disabled,size:"small",multiple:t.multiple},on:{input:function(e){return t.$emit("input",e)}}},[t.anyOption?a("el-option",{attrs:{label:"任意",value:"any"}}):t._e(),t._l(t.allArtifactsName,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"item"},[a("img",{staticClass:"tn",attrs:{src:e.url}}),a("span",[t._v(t._s(e.chs))])])])}))],2)},n=[],s=a(73334),l=a(4222);let r=Object.values(s.oN);r.sort(((t,e)=>e.maxStar-t.maxStar));let o=r.map((t=>({name:t.eng,chs:t.chs,url:(0,l.Lk)(t.eng)})));var c={name:"SelectArtifactSet",created:function(){this.allArtifactsName=o},props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},anyOption:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}}},u=c,m=a(1001),f=(0,m.Z)(u,i,n,!1,null,"26ef18cc",null),h=f.exports},84735:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("套装：")]),a("select-artifact-set",{attrs:{value:t.setName,"any-option":""},on:{input:t.updateSetName}})],1),a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("等级（>=）：")]),a("el-input-number",{attrs:{min:0,max:20,value:t.minLevel,size:"small"},on:{input:t.updateMinLevel}})],1)])},n=[],s=a(53017),l={name:"ArtifactsFilter",components:{SelectArtifactSet:s.Z},props:["filter"],data(){return{setName:"any",minLevel:0}},methods:{doUpdate(){this.$emit("update:filter",this.fil)},updateSetName(t){this.setName=t,this.doUpdate()},updateMinLevel(t){this.minLevel=t,this.doUpdate()}},computed:{filterSetName(){return t=>"any"===this.setName||t.setName===this.setName},filterMinLevel(){return t=>(t.level??20)>=this.minLevel},fil(){return t=>this.filterSetName(t)&&this.filterMinLevel(t)}}},r=l,o=a(1001),c=(0,o.Z)(r,i,n,!1,null,"75de876d",null),u=c.exports},67817:function(t,e){e["Z"]=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"]},20758:function(t,e,a){a.r(e),a.d(e,{default:function(){return Ot}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("add-artifact-dialog",{attrs:{visible:t.newDialogVisible},on:{"update:visible":function(e){t.newDialogVisible=e},confirm:t.handleAddArtifact}}),a("import-json-dialog",{attrs:{visible:t.importJsonDialogVisible},on:{"update:visible":function(e){t.importJsonDialogVisible=e}}}),a("output-json-dialog",{attrs:{visible:t.outputJsonDialogVisible},on:{"update:visible":function(e){t.outputJsonDialogVisible=e}}}),a("edit-artifact-drawer",{ref:"editDrawer",attrs:{visible:t.editArtifactDrawerVisible,args:t.editArtifactArgs},on:{"update:visible":function(e){t.editArtifactDrawerVisible=e}}}),a("el-breadcrumb",[a("el-breadcrumb-item",[t._v("圣遗物")])],1),a("el-divider"),a("el-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{title:"请注意保存圣遗物数据至本地，以防意外导致数据丢失",type:"warning",closable:!1}}),a("el-tag",[t._v("数量："+t._s(t.$store.getters["artifacts/count"]))]),a("div",{staticClass:"tool-bar"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v(" 添加圣遗物 ")]),a("div",{staticClass:"tool-right"},[a("el-button",{on:{click:t.handleImportJsonClicked}},[t._v(" 导入json ")]),a("el-button",{on:{click:t.handleOutputJsonClicked}},[t._v(" 导出json ")])],1)],1),a("artifacts-filter",{staticStyle:{"margin-bottom":"16px"},attrs:{filter:t.artifactsFilter},on:{"update:filter":function(e){t.artifactsFilter=e}}}),a("div",{staticClass:"small-toolbar",staticStyle:{"margin-bottom":"16px"}},[a("el-popconfirm",{staticStyle:{"margin-right":"8px"},attrs:{title:"确定清除吗，将会同时清除圣遗物套装数据"},on:{confirm:t.handleClickDeleteAll}},[a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger",title:"清空"},slot:"reference"},[t._v(" 清空 ")])],1),a("el-button",{attrs:{size:"mini",icon:"el-icon-unlock",title:"启用全部"},on:{click:function(e){return t.$store.commit("artifacts/unlockAll")}}},[t._v("启用全部")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-unlock",circle:"",title:"锁定/解锁当前页"},on:{click:t.lockOrUnlockCurrentPage}})],1),a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.artifactsType,(function(e){return a("el-tab-pane",{key:e.name,staticClass:"panel",attrs:{name:e.name}},[a("div",{staticClass:"flex-row",attrs:{slot:"label"},slot:"label"},[a("img",{attrs:{src:e.iconURL}}),a("span",[t._v(t._s(e.chs))])]),t._l(t.filteredArtifacts[e.name],(function(i){return a("artifact",{key:i.id,staticClass:"artifact-panel",attrs:{item:i},on:{delete:function(a){return t.removeArtifact(e.name,i.id)},toggle:function(a){return t.toggleArtifact(e.name,i.id)},edit:function(a){return t.editArtifact(e.name,i.id)}}})}))],2)})),1)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"添加圣遗物",visible:t.visible,width:"80%","before-close":t.onCancel},scopedSlots:t._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:t.onCancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("确定")])]},proxy:!0}])},[a("h3",[t._v("套装")]),a("choose-artifact-set",{attrs:{value:t.setName},on:{input:t.handleSetNameChange}}),a("h3",[t._v("位置")]),a("choose-artifact-position",{attrs:{setName:t.setName},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("h3",[t._v("品质")]),a("el-rate",{attrs:{value:t.star,max:t.artifactData.maxStar},on:{input:t.handleStarChange}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex-row"},[a("h3",{staticStyle:{"margin-right":"8px"}},[t._v("等级")]),a("el-button",{attrs:{icon:"el-icon-d-arrow-left",circle:"",size:"mini",title:"0级"},on:{click:function(e){t.level=0}}}),a("el-button",{attrs:{icon:"el-icon-d-arrow-right",circle:"",size:"mini",title:"满级"},on:{click:function(e){t.level=4*t.star}}})],1),a("el-input-number",{attrs:{max:4*t.star,min:0,size:"small"},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)],1),a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("h3",[t._v("主属性")]),a("select-artifact-main-tag",{attrs:{value:t.mainTag,position:t.position},on:{input:t.handleMainTagChange}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex-row"},[a("h3",{staticStyle:{"margin-right":"8px"}},[t._v("副属性")]),a("el-button",{attrs:{icon:"el-icon-refresh",circle:"",size:"mini",title:"随机"},on:{click:t.shuffleNormalTags}}),a("el-button",{staticStyle:{padding:"0"},attrs:{icon:"el-icon-question",circle:"",title:"帮助",type:"text"},on:{click:t.openHelp}})],1),a("select-artifact-normal-tag",{model:{value:t.normalTags,callback:function(e){t.normalTags=e},expression:"normalTags"}})],1)],1)],1)},l=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-artifact-set"},t._l(t.artifactsData,(function(e){return a("div",{key:e.eng,staticClass:"item",class:{active:e.eng===t.value},on:{click:function(a){return t.$emit("input",e.eng)}}},[a("el-image",{staticClass:"image",attrs:{src:t.getArtifactThumbnailURL(e.eng)}}),a("p",{staticClass:"text"},[t._v(" "+t._s(e.chs)+" ")])],1)})),0)},o=[],c=a(73334),u=a(4222),m={name:"SetChoose",inject:["star"],created:function(){this.artifactsData=Object.values(c.oN),this.artifactsData.sort(((t,e)=>e.maxStar-t.maxStar)),this.getArtifactThumbnailURL=u.Lk},props:{value:{type:String}}},f=m,h=a(1001),d=(0,h.Z)(f,r,o,!1,null,"1bc47a68",null),p=d.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-artifact-position"},t._l(t.availablePositions,(function(e){return a("div",{key:e,staticClass:"item",class:{active:e===t.value},on:{click:function(a){return t.$emit("input",e)}}},[a("img",{staticClass:"image",attrs:{src:t.selectedArtData[e].url}}),a("p",{staticClass:"text"},[t._v(" "+t._s(t.selectedArtData[e].chs)+" ")])])})),0)},v=[],b={name:"PositionChoose",created:function(){this.artifactsData=c.oN},props:{setName:{type:String},value:{type:String}},methods:{choose(t){this.$emit("input",t)}},computed:{selectedArtData(){return this.artifactsData[this.setName]||{}},availablePositions(){return["flower","feather","sand","cup","head"].filter((t=>Object.prototype.hasOwnProperty.call(this.selectedArtData,t)))}},watch:{setName(){if(-1===this.availablePositions.indexOf(this.value)){let t=this.availablePositions[0];this.$emit("input",t)}}}},C=b,y=(0,h.Z)(C,g,v,!1,null,"bf0d2af6",null),_=y.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(4,(function(e){return a("div",{key:e,staticClass:"item"},[a("el-input",{staticClass:"input",attrs:{value:t.displayedValue[e-1],size:"small"},on:{input:function(a){return t.handleValueChange(e-1,a)}}},[a("template",{slot:"prepend"},[a("el-select",{staticClass:"prepend",attrs:{value:t.names[e-1]},on:{input:function(a){return t.handleTagChange(e-1,a)}}},t._l(t.secondaryTagData,(function(t){return a("el-option",{key:t.name,attrs:{label:t.chs,value:t.name}})})),1)],1),a("template",{slot:"append"},[t.isPercentage[e-1]?a("span",[t._v("%")]):t._e()])],2),a("el-button",{staticClass:"del-button",attrs:{icon:"el-icon-delete",circle:"",type:"text"},on:{click:function(a){return t.deleteItem(e-1)}}})],1)})),0)},k=[],A=a(28054),x=a(73332);let w=c.NY.map((t=>A.C[t]));var S={name:"SelectArtifactNormalTag",created:function(){this.secondaryTagData=w},props:{value:{type:Array,required:!0}},methods:{handleValueChange(t,e){if(!this.value[t])return;let a=(0,x.Z)(this.value);a[t].value=e,this.$emit("input",a)},handleTagChange(t,e){let a=(0,x.Z)(this.value);this.value[t]&&""!==this.value[t].name?a[t].name=e:a.push({name:e,value:0}),this.$emit("input",a)},deleteItem(t){let e=[];for(let a=0;a<this.value.length;a++)a!==t&&e.push((0,x.Z)(this.value[a]));this.$emit("input",e)}},computed:{isPercentage(){let t=[];for(let a=0;a<4;a++)try{t.push(A.C[this.value[a].name].percentage)}catch(e){t.push(!1)}return t},displayedValue(){let t=[];for(let a=0;a<4;a++)try{let e=this.value[a].value;t.push(e)}catch(e){t.push("0")}return t},names(){let t=[];for(let a=0;a<4;a++)try{let e=this.value[a].name;t.push(e)}catch(e){t.push("")}return t}}},$=S,N=(0,h.Z)($,T,k,!1,null,"2b17aa78",null),D=N.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-input",{attrs:{value:t.value.value,size:"small"},on:{input:t.handleValueChange}},[a("template",{slot:"prepend"},[a("el-select",{staticClass:"prepend",attrs:{value:t.value.name},on:{input:t.handleTagChange}},t._l(t.validTags,(function(t){return a("el-option",{key:t.name,attrs:{label:t.chs,value:t.name}})})),1)],1),a("template",{slot:"append"},[t.isPercentage?a("span",[t._v("%")]):t._e()])],2)},O=[];const P={flower:c.Fb.flower.map((t=>A.C[t])),feather:c.Fb.feather.map((t=>A.C[t])),sand:c.Fb.sand.map((t=>A.C[t])),cup:c.Fb.cup.map((t=>A.C[t])),head:c.Fb.head.map((t=>A.C[t]))};var M={name:"SelectArtifactMainTag",props:{value:{type:Object,required:!0},position:{type:String}},methods:{handleTagChange(t){let e=Object.assign({},this.value);e.name=t,this.$emit("input",e)},handleValueChange(t){let e=Object.assign({},this.value);e.value=t,this.$emit("input",e)}},computed:{validTags(){return""===this.position?[]:P[this.position]},isPercentage(){return!!this.value.name&&A.C[this.value.name].percentage}},watch:{position(){if(-1===c.Fb[this.position].indexOf(this.value.name)){let t=c.Fb[this.position][0],e=Object.assign({},this.value);e.name=t,this.$emit("input",e)}}}},F=M,L=(0,h.Z)(F,j,O,!1,null,"f330b49c",null),Z=L.exports,V={4:{critical:[.022,.025,.028,.031],lifePercentage:[.033,.037,.042,.047],attackPercentage:[.033,.037,.042,.047],recharge:[.036,.041,.047,.052],defendPercentage:[.041,.047,.053,.058],criticalDamage:[.044,.05,.056,.062],attackStatic:[11,12,14,16],defendStatic:[13,15,17,19],elementalMastery:[13,15,17,19],lifeStatic:[167,191,215,239]},5:{critical:[.027,.031,.035,.039],lifePercentage:[.041,.047,.053,.058],attackPercentage:[.041,.047,.053,.058],recharge:[.045,.052,.058,.065],defendPercentage:[.051,.058,.066,.073],criticalDamage:[.054,.062,.07,.078],attackStatic:[14,16,18,19],defendStatic:[16,19,21,23],elementalMastery:[16,19,21,23],lifeStatic:[209,239,269,299]}};function J(){return Math.random()<.5?1:0}function I(t){let e=Math.floor(Math.random()*t.length);return t[e]}function z(t,e){return Math.floor(Math.random()*(e-t))+t}function B(t,e){let a=c.NY.filter((t=>-1===e.indexOf(t))),i=a.length,n=[];for(let s=0;s<t;s++){let t=z(0,i);n.push(a[t]);let e=a[t];a[t]=a[i-1],a[i-1]=e,i--}return n}function E(t,e,a){let i=V[t],n=Math.floor(e/4),s=t-2+J(),l=Math.min(4,n+s),r=B(l,a),o=[];r.forEach((t=>{o.push({name:t,value:I(i[t])})}));let c=n+s-4;for(let u=0;u<c;u++){let t=z(0,o.length);o[t].value+=I(i[o[t].name])}return o}function U(t,e){return t.mainTag.name===e.mainTag.name&&t.mainTag.value===e.mainTag.value}function R(t,e){if(t.normalTags.length!==e.normalTags.length)return!1;let a=new Set;for(let i of t.normalTags){let t=i.name+i.value.toFixed(3);a.add(t)}for(let i of e.normalTags){let t=i.name+i.value.toFixed(3);if(!a.has(t))return!1}return!0}function H(t,e){return t.setName===e.setName&&(t.position===e.position&&(!!U(t,e)&&!!R(t,e)))}function X(t,e){for(let a of t)if(H(a,e))return!1;return!0}function q(t){return t.value=(0,u.MI)(t.name,t.value),t}var Y={name:"NewDialog",provide(){return{star:this.star}},components:{ChooseArtifactSet:p,ChooseArtifactPosition:_,SelectArtifactNormalTag:D,SelectArtifactMainTag:Z},props:{visible:{type:Boolean}},data:function(){return{setName:"archaicPetra",position:"flower",mainTag:{name:"lifeStatic",value:"4780"},normalTags:[],star:5,level:20}},methods:{handleStarChange(t){t>=this.artifactData.minStar&&t<=this.artifactData.maxStar&&(this.star=t,this.level=4*this.star)},handleMainTagChange(t){if(t.name!==this.mainTag.name){let e=A.C[t.name].max[5];this.mainTag.value=(0,u.ut)(t.name,e),this.mainTag.name=t.name}else this.mainTag=t},handleSetNameChange(t){this.setName=t,this.star=this.artifactData.maxStar,this.level=4*this.star},getArtifact:function(){return{setName:this.setName,position:this.position,detailName:(0,u.F_)(this.setName,this.position),mainTag:this.getArtifactMainTag(),normalTags:this.getArtifactNormalTags(),omit:this.level<16,star:this.star,level:this.level,id:0}},getArtifactMainTag(){let t=Object.assign({},this.mainTag);return t.value=parseFloat(t.value),isNaN(t.value)&&(t.value=0),q(t)},getArtifactNormalTags(){let t=[];for(let e of this.normalTags)""!==e.value&&"0"!==e.value&&t.push(q({name:e.name,value:parseFloat(e.value)}));return t},onConfirm(){let t=this.getArtifact();X(this.$store.getters["artifacts/allFlat"],t)?this.$emit("confirm",t):this.$confirm("检测到已有相同圣遗物，是否继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$emit("confirm",t)})).catch((()=>{}))},onCancel(){this.$emit("update:visible",!1)},shuffleNormalTags(){let t=E(5,20,[this.mainTag.name]);for(let e=0,a=t.length;e<a;e++)t[e].value=(0,u.ut)(t[e].name,t[e].value);this.normalTags=t},openHelp(){let t="使用随机副词条，可以快速构建大量合理的圣遗物，可以方便地确定某个角色适合什么圣遗物。例如，快速构建角斗士、乐团、魔女4件套，从而计算胡桃适合什么样的圣遗物组合";this.$alert(t,"帮助")}},computed:{artifactData(){return c.oN[this.setName]}}},G=Y,K=(0,h.Z)(G,s,l,!1,null,"13ff427b",null),Q=K.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"导入json",visible:t.visible,width:"80%","before-close":t.handleClose},on:{opened:t.handleOpened}},[a("h3",{staticClass:"text"},[t._v("欢迎大佬开发第三方导出工具，json接口请参考："),a("a",{attrs:{target:"_blank",href:"https://wormtql.gitbook.io/mona-uranai/"}},[t._v("文档")])]),a("p"),a("el-input",{ref:"field",attrs:{type:"textarea",placeholder:"输入json",rows:5},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),t.supportFileReader?a("p",[t._v("*支持拖拽文件")]):t._e(),a("div",{staticClass:"buttons"},[a("el-button",{staticClass:"confirm-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.handleAppend}},[t._v(" 导入"),a("i",{staticClass:"el-icon-document-add"})]),a("el-button",{staticClass:"cancel-button",on:{click:t.handleClose}},[t._v("取消")])],1)],1)},tt=[],et=a(62479);let at=!!window.FileReader;var it={name:"ImportJsonDialog",props:{visible:{type:Boolean}},data:function(){return{json:""}},created(){this.supportFileReader=at},methods:{handleOpened(){if(!at)return;let t=this.$refs.field.$el;t.ondrop=t=>{t.preventDefault();let e=t.dataTransfer;if(0===e.length)return;let a=e.files[0],i=new FileReader;i.onload=t=>{this.json=t.target.result},i.readAsText(a)}},handleClose(){let t=this.$refs.field.$el;t.ondrop=null,this.$emit("update:visible",!1)},appendArtifacts(){let{artifacts:t,invalidCount:e}=(0,et.Z)(this.json);e>0&&this.$message({type:"warning",message:`有${e}个圣遗物无法识别，这些圣遗物已舍弃`}),this.$store.commit("artifacts/appendArtifactsCheckHash",t)},handleAppend(){this.json&&this.appendArtifacts(),this.$emit("close")},async handleOverwrite(){this.json&&this.appendArtifacts(),this.$emit("close")}}},nt=it,st=(0,h.Z)(nt,W,tt,!1,null,"8cb534f2",null),lt=st.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"导出json",visible:t.visible,width:"80%","before-close":t.handleClose}},[a("p",{staticClass:"text"},[t._v(" "+t._s(t.outputJson)+" ")]),a("div",{staticClass:"buttons"},[t.canCopy?a("el-button",{staticClass:"confirm-button",attrs:{type:"primary"},on:{click:t.handleCopy}},[t._v("复制")]):t._e(),a("el-button",{staticClass:"cancel-button",on:{click:t.handleClose}},[t._v("关闭")])],1)])},ot=[],ct={name:"OutputJsonDialog",props:{visible:{type:Boolean}},created:function(){this.canCopy=!!navigator.clipboard},data:function(){return{json:""}},methods:{handleClose(){this.$emit("update:visible",!1)},handleCopy(){navigator.clipboard.writeText(this.outputJson).then((()=>{this.$message("复制成功")})).catch((()=>{this.$message.error("复制失败")}))}},computed:{outputJson(){let t={};return["flower","feather","sand","cup","head"].forEach((e=>{t[e]=this.$store.state.artifacts[e]})),JSON.stringify(t)}}},ut=ct,mt=(0,h.Z)(ut,rt,ot,!1,null,"21149ab9",null),ft=mt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"artifact",class:{omit:t.item.omit}},[a("div",{staticClass:"up"},[a("span",{staticClass:"name"},[t._v(" "+t._s(t.displayedTitle)+" "),a("span",{staticStyle:{color:"#e7bf4f"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(t._s(t.displayedStar)+" ")])]),a("div",{staticClass:"buttons"},[a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-delete",circle:"",size:"mini",type:"text",title:"删除"},on:{click:function(e){return t.$emit("delete")}}}),a("el-button",{staticClass:"mybutton",attrs:{icon:t.item.omit?"el-icon-unlock":"el-icon-lock",circle:"",size:"mini",type:"text",title:t.item.omit?"启用":"禁用"},on:{click:function(e){return t.$emit("toggle")}}}),a("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-edit",circle:"",size:"mini",type:"text",title:"编辑"},on:{click:function(e){return t.$emit("edit")}}})],1)]),a("div",{staticClass:"down"},[a("div",[a("img",{staticClass:"myimage",style:{background:t.imageBackground},attrs:{src:t.imageSrc}})]),a("div",{staticClass:"detail-div"},[a("p",{staticClass:"main-tag"},[t._v(t._s(t.mainDisplayTag))]),t._l(t.normalTags,(function(e,i){return a("p",{key:i,staticClass:"sec-tag"},[t._v(" "+t._s(e)+" ")])}))],2)])])},dt=[],pt=a(67817),gt={name:"Artifact",props:{item:{type:Object,default:()=>({setName:"luckyDog",position:"cup",detailName:"worm666",mainTag:{name:"attackPercentage",value:.1},normalTags:[{name:"defendStatic",value:20},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3}],star:5,level:20,omit:!1})}},computed:{displayedTitle(){let t=c.oN[this.item.setName],e="not exist";return t[this.item.position]&&(e=t[this.item.position].chs,Object.prototype.hasOwnProperty.call(this.item,"level")?e+="+"+this.item.level:e+="+??"),e},displayedStar(){return this.item.star||"??"},imageSrc(){let t=c.oN[this.item.setName];return t[this.item.position]?t[this.item.position].url:""},mainDisplayTag(){return(0,u.jH)(this.item.mainTag.name,this.item.mainTag.value)},normalTags(){let t=[];for(let e of this.item.normalTags)t.push((0,u.jH)(e.name,e.value));return t},imageBackground(){let t=this.item.star??5;return pt.Z[t-1]}}},vt=gt,bt=(0,h.Z)(vt,ht,dt,!1,null,"436e5462",null),Ct=bt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"编辑词条",visible:t.visible,direction:"rtl","before-close":t.handleCancel}},[this.artifact?a("div",{staticClass:"header"},[a("img",{attrs:{src:t.thumbnail.url}}),a("span",[t._v(t._s(t.thumbnail.chs))])]):t._e(),a("el-divider"),a("div",{staticStyle:{padding:"0 20px"}},[this.artifact?a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"title"},[t._v("品质")]),a("el-rate",{attrs:{value:t.star,max:t.artifactData.maxStar},on:{input:t.handleStarChange}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex-row"},[a("p",{staticClass:"title",staticStyle:{"margin-right":"8px"}},[t._v("等级")]),a("el-button",{attrs:{icon:"el-icon-d-arrow-left",circle:"",size:"mini",title:"0级"},on:{click:function(e){t.level=0}}}),a("el-button",{attrs:{icon:"el-icon-d-arrow-right",circle:"",size:"mini",title:"满级"},on:{click:function(e){t.level=4*t.star}}})],1),a("el-input-number",{attrs:{max:4*t.star,min:0,size:"small"},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)],1):t._e()],1),a("el-divider"),this.artifact?a("div",{staticClass:"main-tag"},[a("p",{staticClass:"title"},[t._v("词条")]),a("select-artifact-main-tag",{attrs:{position:t.artifact.position,value:t.mainTag},on:{input:t.handleMainTagChange}})],1):t._e(),this.artifact?a("div",{staticClass:"normal-tag"},[a("select-artifact-normal-tag",{model:{value:t.normalTags,callback:function(e){t.normalTags=e},expression:"normalTags"}})],1):t._e(),a("el-divider"),a("div",{staticClass:"buttons"},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v(" 确定 ")])],1),a("el-col",{attrs:{span:12}},[a("el-button",{on:{click:t.handleCancel}},[t._v(" 取消 ")])],1)],1)],1)],1)},_t=[],Tt={name:"EditArtifactDrawer",components:{SelectArtifactMainTag:Z,SelectArtifactNormalTag:D},props:{visible:{type:Boolean},args:{type:Object,default:()=>({id:-1})}},data:function(){return{mainTag:{name:"",value:"0"},normalTags:[{name:"",value:"0"},{name:"",value:"0"},{name:"",value:"0"},{name:"",value:"0"}],star:5,level:1}},methods:{handleStarChange(t){t>=this.artifactData.minStar&&t<=this.artifactData.maxStar&&(this.star=t,this.level=4*this.star)},handleMainTagChange(t){if(t.name!==this.mainTag.name){let e=A.C[t.name].max[5];this.mainTag.value=(0,u.ut)(t.name,e),this.mainTag.name=t.name}else this.mainTag=t},setInit(t){this.mainTag.name=t.mainTag.name,this.mainTag.value=(0,u.ut)(t.mainTag.name,t.mainTag.value),this.normalTags=[];for(let e of t.normalTags)this.normalTags.push({name:e.name,value:(0,u.ut)(e.name,e.value)});this.star=5,Object.prototype.hasOwnProperty.call(t,"star")&&(this.star=t.star),this.level=t.level??20},handleConfirm(){this.doUpdate(),this.$emit("close")},doUpdate(){let t=(0,x.Z)(this.artifact);t.mainTag.name=this.mainTag.name,t.mainTag.value=(0,u.MI)(this.mainTag.name,this.mainTag.value),t.normalTags=[];for(let e of this.normalTags)t.normalTags.push({name:e.name,value:(0,u.MI)(e.name,e.value)});t.level=this.level,t.star=this.star,this.$store.commit("artifacts/setArtifactById",{id:this.artifact.id,newArt:t})},handleCancel(){this.$emit("update:visible",!1)}},computed:{artifact(){let t=this.args.id;if(t<0)return null;let e=this.$store.getters["artifacts/artifactsById"];return e[t]},artifactData(){return c.oN[this.artifact.setName]||{}},thumbnail(){if(this.artifact){let t=c.oN[this.artifact.setName];return t[this.artifact.position]}return{}}}},kt=Tt,At=(0,h.Z)(kt,yt,_t,!1,null,"1d90065a",null),xt=At.exports,wt=a(84735),St=a(71899),$t=a(66425),Nt={name:"ArtifactsPage",components:{AddArtifactDialog:Q,ImportJsonDialog:lt,OutputJsonDialog:ft,Artifact:Ct,EditArtifactDrawer:xt,ArtifactsFilter:wt.Z},created:function(){this.artifactsIcon=c.XL,this.artifactsType=[{name:"flower",chs:"生之花",iconURL:c.XL.flower},{name:"feather",chs:"死之羽",iconURL:c.XL.feather},{name:"sand",chs:"时之沙",iconURL:c.XL.sand},{name:"cup",chs:"空之杯",iconURL:c.XL.cup},{name:"head",chs:"理之冠",iconURL:c.XL.head}]},data:function(){return{activeName:"flower",newDialogVisible:!1,importJsonDialogVisible:!1,outputJsonDialogVisible:!1,editArtifactDrawerVisible:!1,editArtifactArgs:{id:-1},artifactsFilter:()=>!0}},methods:{handleClickDeleteAll(){this.$store.commit("artifacts/removeAllArtifacts")},lockOrUnlockCurrentPage(){let t=this.$store.getters["artifacts/allArtifacts"][this.activeName],e=t.reduce(((t,e)=>t+(e.omit?1:0)),0);if(e===t.length||0===e)for(let a=0;a<t.length;a++)this.$store.commit("artifacts/toggleArtifact",{position:this.activeName,index:a});else for(let a=0;a<t.length;a++)t[a].omit&&this.$store.commit("artifacts/toggleArtifact",{position:this.activeName,index:a})},removeArtifact:function(t,e){this.$store.commit("artifacts/removeArtifactById",{id:e})},toggleArtifact:function(t,e){this.$store.commit("artifacts/toggleArtifactById",{id:e})},editArtifact:function(t,e){this.editArtifactDrawerVisible=!0,this.editArtifactArgs.id=e;let a=this.$store.getters["artifacts/artifactsById"][e];this.$refs.editDrawer.setInit(a)},add:function(){this.newDialogVisible=!0},handleAddArtifact:function(t){this.newDialogVisible=!1,this.activeName=t.position,this.$store.commit("artifacts/addArtifact",t)},handleImportJsonClicked(){this.importJsonDialogVisible=!0},handleOutputJsonClicked(){this.outputJsonDialogVisible=!0}},computed:{allArtifacts(){return this.$store.getters["artifacts/allArtifacts"]},filteredArtifacts(){let t={};for(let e of $t.Z)t[e]=this.allArtifacts[e].filter(this.artifactsFilter);return t},estimatedTime(){let t=this.$store.getters["artifacts/iterCount"];return(0,St.m)(t)}}},Dt=Nt,jt=(0,h.Z)(Dt,i,n,!1,null,"e4b74694",null),Ot=jt.exports},73332:function(t,e){function a(t){return Array.isArray(t)?i(t):"object"===typeof t?n(t):t}function i(t){let e=[];for(let i of t)e.push(a(i));return e}function n(t){let e={};for(let i in t)e[i]=a(t[i]);return e}e["Z"]=a},71899:function(t,e,a){function i(t){let e=Math.floor(.006*t/1e3);if(e<1)return"不到1秒";{let t=Math.floor(e/60);return 0===t?`${e}秒`:`${t}分${Math.floor(e-60*t)}秒`}}a.d(e,{m:function(){return i}})},4222:function(t,e,a){a.d(e,{F_:function(){return c},Lk:function(){return r},MI:function(){return o},jH:function(){return s},kC:function(){return m},nr:function(){return u},ut:function(){return l}});var i=a(28054),n=a(73334);function s(t,e){let a=i.C[t];if(!a)throw"tag name not exist";let n="";switch(t){case"attackPercentage":case"attackStatic":n="攻击力";break;case"lifePercentage":case"lifeStatic":n="生命值";break;case"defendPercentage":case"defendStatic":n="防御力";break;default:n=a.chs;break}if(a.percentage){let t=(100*e).toFixed(1);return n+"+"+t+"%"}return n+"+"+e}function l(t,e){let a=i.C[t];if(!a)throw"tag name not exist";return a.percentage?(100*e).toFixed(1):e}function r(t){let e=n.oN[t];return e["flower"]?e["flower"].url:e["head"].url}function o(t,e){let a=parseFloat(e);return i.C[t].percentage?a/100:a}function c(t,e){return n.oN[t][e].chs}function u(t){switch(t){case"flower":return"生之花";case"feather":return"死之羽";case"sand":return"时之沙";case"cup":return"空之杯";case"head":return"理之冠"}}function m(t){return t.charAt(0).toUpperCase()+t.slice(1)}}}]);