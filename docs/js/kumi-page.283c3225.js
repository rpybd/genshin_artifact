"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[262],{93676:function(t,e,i){i.d(e,{Z:function(){return m}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"artifact",class:{selectable:t.selectable,omit:t.item.omit},style:t.artifactStyle,on:{click:t.handleClick}},[i("div",{staticClass:"up"},[i("span",{staticClass:"name"},[t._v(" "+t._s(t.displayedTitle)+" ")]),t.extra?i("span",{staticClass:"extra fs-12"},[t._v(t._s(t.extra))]):t._e(),t.buttons?i("div",{staticClass:"buttons"},[t.lockButton?i("el-button",{staticClass:"mybutton",attrs:{icon:t.item.omit?"el-icon-unlock":"el-icon-lock",circle:"",size:"mini",type:"text",title:t.item.omit?"启用":"禁用"},on:{click:function(e){return t.$emit("toggle")}}}):t._e(),t.deleteButton?i("el-button",{staticClass:"mybutton",attrs:{icon:"el-icon-delete",circle:"",size:"mini",type:"text",title:"删除"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}}):t._e()],1):t._e()]),i("div",{staticClass:"down"},[i("div",[i("img",{staticClass:"myimage",style:{background:t.imageBackground},attrs:{src:t.imageSrc}})]),i("div",{staticClass:"detail-div"},[i("p",{staticClass:"main-tag"},[t._v(t._s(t.mainDisplayTag))]),t._l(t.secTags,(function(e,a){return i("p",{key:a,staticClass:"sec-tag"},[t._v(" "+t._s(e)+" ")])}))],2)])])},s=[],n=i(4222),l=i(73334),r=i(67817),c={name:"ArtifactDisplay",props:{item:{type:Object,default:()=>({setName:"luckyDog",position:"cup",detailName:"worm666",mainTag:{name:"attackPercentage",value:.1},normalTags:[{name:"defendStatic",value:20},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3},{name:"attackPercentage",value:.3}],omit:!1})},selectable:{type:Boolean,default:!1},extra:{type:String,default:""},buttons:{type:Boolean,default:!1},deleteButton:{type:Boolean,default:!1},lockButton:{type:Boolean,default:!0},width:{type:String,default:"unset"}},methods:{handleClick(){this.selectable&&this.$emit("click")}},computed:{displayedTitle(){let t=l.oN[this.item.setName];if(!t)throw"no artifact";let e="not exist";return t[this.item.position]&&(e=t[this.item.position].chs,Object.prototype.hasOwnProperty.call(this.item,"level")?e+="+"+this.item.level:e+="+??"),e},displayedStar(){return this.item.star||"??"},imageSrc(){let t=l.oN[this.item.setName];if(!t)throw"no artifact";if(t[this.item.position])return t[this.item.position].url;throw"error no position"},mainDisplayTag(){return(0,n.jH)(this.item.mainTag.name,this.item.mainTag.value)},secTags(){let t=[];for(let e of this.item.normalTags)t.push((0,n.jH)(e.name,e.value));return t},imageBackground(){let t=this.item.star??5;return r.Z[t-1]},artifactStyle(){return{width:this.width}}}},o=c,u=i(1001),d=(0,u.Z)(o,a,s,!1,null,"657178e7",null),m=d.exports},53017:function(t,e,i){i.d(e,{Z:function(){return f}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-select",{attrs:{value:t.value,disabled:t.disabled,size:"small",multiple:t.multiple},on:{input:function(e){return t.$emit("input",e)}}},[t.anyOption?i("el-option",{attrs:{label:"任意",value:"any"}}):t._e(),t._l(t.allArtifactsName,(function(e){return i("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[i("div",{staticClass:"item"},[i("img",{staticClass:"tn",attrs:{src:e.url}}),i("span",[t._v(t._s(e.chs))])])])}))],2)},s=[],n=i(73334),l=i(4222);let r=Object.values(n.oN);r.sort(((t,e)=>e.maxStar-t.maxStar));let c=r.map((t=>({name:t.eng,chs:t.chs,url:(0,l.Lk)(t.eng)})));var o={name:"SelectArtifactSet",created:function(){this.allArtifactsName=c},props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},anyOption:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}}},u=o,d=i(1001),m=(0,d.Z)(u,a,s,!1,null,"26ef18cc",null),f=m.exports},84735:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"item"},[i("span",{staticClass:"title"},[t._v("套装：")]),i("select-artifact-set",{attrs:{value:t.setName,"any-option":""},on:{input:t.updateSetName}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"title"},[t._v("等级（>=）：")]),i("el-input-number",{attrs:{min:0,max:20,value:t.minLevel,size:"small"},on:{input:t.updateMinLevel}})],1)])},s=[],n=i(53017),l={name:"ArtifactsFilter",components:{SelectArtifactSet:n.Z},props:["filter"],data(){return{setName:"any",minLevel:0}},methods:{doUpdate(){this.$emit("update:filter",this.fil)},updateSetName(t){this.setName=t,this.doUpdate()},updateMinLevel(t){this.minLevel=t,this.doUpdate()}},computed:{filterSetName(){return t=>"any"===this.setName||t.setName===this.setName},filterMinLevel(){return t=>(t.level??20)>=this.minLevel},fil(){return t=>this.filterSetName(t)&&this.filterMinLevel(t)}}},r=l,c=i(1001),o=(0,c.Z)(r,a,s,!1,null,"75de876d",null),u=o.exports},86829:function(t,e,i){i.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("input",{style:t.inputStyle,attrs:{disabled:!t.editable},domProps:{value:t.value},on:{click:function(e){t.edit=!0},blur:t.onBlur}}),i("span",{staticClass:"border"})])},s=[],n={name:"ClickEditLabel",props:{value:{},fontsize:{},editable:{default:!0}},data(){return{edit:!1}},methods:{onBlur(t){let e=t.target.value;this.edit=!1,this.$emit("input",e)}},computed:{inputStyle(){let t=this.fontsize??"14px",e={fontSize:t};return e}}},l=n,r=i(1001),c=(0,r.Z)(l,a,s,!1,null,"5263f0a4",null),o=c.exports},66360:function(t,e,i){i.d(e,{Z:function(){return f}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("artifacts-filter",{staticStyle:{"margin-bottom":"16px"},attrs:{filter:t.artifactsFilter},on:{"update:filter":function(e){t.artifactsFilter=e}}}),"any"===t.pos?i("el-tabs",{model:{value:t.activePosition,callback:function(e){t.activePosition=e},expression:"activePosition"}},t._l(t.positions,(function(e){return i("el-tab-pane",{key:e,staticClass:"artifact-panel",attrs:{name:e,label:t.positionToLocale(e)}},[t._l(t.filteredArtifacts[e],(function(a){return i("artifact-display",{key:a.id,staticClass:"artifact-item",class:{active:t.selected[e]===a.id},attrs:{selectable:"",item:a,width:"200px"},on:{click:function(i){return t.handleClick(e,a.id)}}})})),0===t.filteredArtifacts[e].length?i("el-alert",{attrs:{title:"没有符合条件的圣遗物",closable:!1}}):t._e()],2)})),1):i("div",{staticClass:"else-div"},[t._l(t.filteredArtifacts[t.pos],(function(e){return i("artifact-display",{key:e.id,staticClass:"artifact-item",class:{active:t.value===e.id},attrs:{selectable:"",item:e,width:"200px"},on:{click:function(i){return t.$emit("input",e.id)}}})})),0===t.filteredArtifacts[t.pos].length?i("el-alert",{attrs:{title:"没有符合条件的圣遗物",closable:!1}}):t._e()],2)],1)},s=[],n=i(66425),l=i(4222),r=i(93676),c=i(84735),o={name:"SelectArtifact",props:{selected:{},pos:{default:"any"},value:{}},components:{ArtifactDisplay:r.Z,ArtifactsFilter:c.Z},created(){this.positions=n.Z},data(){return{activePosition:"flower",artifactsFilter:()=>!0}},methods:{positionToLocale:l.nr,handleClick(t,e){this.selected[t]===e?this.selected[t]=null:this.selected[t]=e}},computed:{filteredArtifacts(){let t={};for(let e of n.Z)t[e]=this.$store.getters["artifacts/allArtifacts"][e].filter(this.artifactsFilter);return t}}},u=o,d=i(1001),m=(0,d.Z)(u,a,s,!1,null,"653bc667",null),f=m.exports},67817:function(t,e){e["Z"]=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"]},85376:function(t,e,i){i.r(e),i.d(e,{default:function(){return F}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-breadcrumb",[i("el-breadcrumb-item",[t._v("圣遗物套装")])],1),i("el-divider"),i("div",{staticClass:"toolbar"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleNewDir}},[t._v("新建收藏夹"),i("i",{staticClass:"el-icon-plus"})])],1),i("el-row",{attrs:{gutter:16}},[i("el-col",{attrs:{span:6}},[i("kumi-display",{model:{value:t.currentDirId,callback:function(e){t.currentDirId=e},expression:"currentDirId"}})],1),i("el-col",{attrs:{span:18}},[i("kumi-directory-display",{attrs:{dirId:t.currentDirId},on:{delete:t.handleDeleteDir}})],1)],1)],1)},s=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.dirs,(function(e){return i("div",{key:e.id,staticClass:"item is-active",class:{active:t.value===e.id},on:{click:function(i){return t.$emit("input",e.id)}}},[t._v(" "+t._s(e.label)+" ")])})),0)},l=[],r={name:"KumiDisplay",props:["value"],computed:{dirs(){let t=this.$store.state.kumi["tree"];return t.children??[]}}},c=r,o=i(1001),u=(0,o.Z)(c,n,l,!1,null,"4424d1d9",null),d=u.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.selectArtifactDialogVisible,width:"80%",title:"选择圣遗物"},on:{"update:visible":function(e){t.selectArtifactDialogVisible=e}}},[i("select-artifacts",{attrs:{pos:t.selectArtifactSlot,value:t.selectArtifactId},on:{input:t.handleConfirmChangeSlot}})],1),i("click-edit-label",{attrs:{value:t.node.label,fontsize:"24px",editable:t.canDelete},on:{input:t.handleChangeTitle}}),i("div",{staticClass:"toolbar"},[i("div",{staticClass:"left"},[i("el-button",{attrs:{size:"small"},on:{click:t.handleNewKumi}},[t._v("新建套装"),i("i",{staticClass:"el-icon-plus"})])],1),i("div",{staticClass:"right"},[t.canDelete?i("el-popconfirm",{attrs:{title:"确定删除？"},on:{confirm:t.handleDeleteDir}},[i("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[t._v("删除收藏夹")])],1):t._e()],1)]),t._l(t.kumiByDir[t.dirId],(function(e){return i("kumi-item",{key:e.id,staticClass:"kumi-item",attrs:{data:e},on:{click:function(i){return t.handleChangeSlot(e.id,i)},delete:function(i){return t.handleDeleteKumi(e.id)},deleteArtifact:function(i){return t.handleDeleteKumiArtifact(e.id,i)}}})}))],2)},f=[],p=i(85773),h=i(66425),v=i(86829),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"up"},[i("click-edit-label",{staticClass:"title",attrs:{value:t.data.name},on:{input:t.handleChangeKumiName}}),i("div",{staticClass:"buttons"},[i("el-button",{attrs:{type:"text",icon:"el-icon-delete",title:"删除"},on:{click:function(e){return t.$emit("delete")}}}),i("el-button",{attrs:{type:"text",icon:"el-icon-rank",title:"移动"},on:{click:function(e){return t.$emit("move")}}})],1)],1),i("div",{staticClass:"body"},[t._l(5,(function(e){return[t.isIdValid(t.data.ids[e-1])?i("artifact-display",{key:e,staticClass:"artifact-item",attrs:{width:"200px",item:t.getArtifactById(t.data.ids[e-1]),selectable:"",buttons:"","lock-button":!1,"delete-button":!0},on:{click:function(i){return t.$emit("click",e-1)},delete:function(i){return t.$emit("deleteArtifact",e-1)}}}):i("add-button",{key:e,staticClass:"artifact-item",attrs:{back:t.getIcon(e)},on:{click:function(i){return t.$emit("click",e-1)}}})]}))],2)])},b=[],g=i(73334),y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root",on:{click:function(e){return t.$emit("click")}}},[""!==t.back?i("img",{attrs:{src:t.back}}):t._e(),i("span",{staticClass:"s1"}),i("span",{staticClass:"s2"}),i("span",{staticClass:"s3"}),i("span",{staticClass:"s4"}),t._v(" + ")])},C=[],_={name:"AddButton",props:{back:{default:""}}},D=_,$=(0,o.Z)(D,y,C,!1,null,"5717728d",null),S=$.exports,I=i(93676),A={name:"KumiItem",components:{AddButton:S,ArtifactDisplay:I.Z,ClickEditLabel:v.Z},props:{data:{default:()=>({name:"test",ids:[7001,-1,2,-3,4]})}},methods:{isIdValid(t){if(t<0)return!1;let e=this.$store.getters["artifacts/artifactsById"];return!!Object.prototype.hasOwnProperty.call(e,t)},getArtifactById(t){let e=this.$store.getters["artifacts/artifactsById"];return e[t]},getIcon(t){let e=[g.XL.flower,g.XL.feather,g.XL.sand,g.XL.cup,g.XL.head];return e[t-1]},handleChangeKumiName(t){this.$store.commit("kumi/updateKumiName",{id:this.data.id,newName:t})}}},w=A,x=(0,o.Z)(w,k,b,!1,null,"ceb6be0c",null),N=x.exports,Z=i(66360),B={name:"KumiDirectory",components:{ClickEditLabel:v.Z,KumiItem:N,SelectArtifacts:Z.Z},props:["dirId"],data(){return{selectArtifactDialogVisible:!1,selectArtifactSlot:"flower",selectArtifactId:-1,changeSlotKumiId:-1,changeSlotPosId:0}},methods:{handleChangeTitle(t){t!==this.node.title&&""!==t&&this.$store.commit("kumi/updateDirName",{id:this.dirId,newName:t})},handleChangeSlot(t,e){let i=h.Z[e];this.selectArtifactSlot=i,this.selectArtifactDialogVisible=!0,this.changeSlotPosId=e,this.changeSlotKumiId=t},handleConfirmChangeSlot(t){this.$store.commit("kumi/updateKumiArtifact",{id:this.changeSlotKumiId,posId:this.changeSlotPosId,newId:t}),this.selectArtifactDialogVisible=!1},handleNewKumi(){this.$store.commit("kumi/newKumi",{ids:[-1,-1,-1,-1,-1],label:"新建套装",under:this.dirId})},handleDeleteKumi(t){this.$store.commit("kumi/deleteKumi",{id:t})},handleDeleteDir(){this.$emit("delete",this.dirId)},handleDeleteKumiArtifact(t,e){this.$store.commit("kumi/updateKumiArtifact",{id:t,posId:e,newId:-1})}},computed:{node(){return(0,p.Z)(this.$store.state.kumi["tree"],(t=>t.id===this.dirId&&"dir"===t.type))},kumiByDir(){return this.$store.getters["kumi/kumiByDir"]},canDelete(){return this.node.id>1}}},K=B,L=(0,o.Z)(K,m,f,!1,null,"5d2392aa",null),P=L.exports,T={name:"KumiPage",components:{KumiDisplay:d,KumiDirectoryDisplay:P},data(){return{currentDirId:-1}},watch:{"$store.state.accounts.currentAccountId":{handler(){this.currentDirId=this.$store.getters["kumi/firstDirId"]},immediate:!0}},methods:{handleDeleteDir(t){this.$store.commit("kumi/deleteDir",{id:t}),this.currentDirId=this.$store.getters["kumi/firstDirId"]},handleNewDir(){this.$store.commit("kumi/newDir",{name:"新建收藏夹"})}}},E=T,z=(0,o.Z)(E,a,s,!1,null,"4e3a99dd",null),F=z.exports},4222:function(t,e,i){i.d(e,{F_:function(){return o},Lk:function(){return r},MI:function(){return c},jH:function(){return n},kC:function(){return d},nr:function(){return u},ut:function(){return l}});var a=i(28054),s=i(73334);function n(t,e){let i=a.C[t];if(!i)throw"tag name not exist";let s="";switch(t){case"attackPercentage":case"attackStatic":s="攻击力";break;case"lifePercentage":case"lifeStatic":s="生命值";break;case"defendPercentage":case"defendStatic":s="防御力";break;default:s=i.chs;break}if(i.percentage){let t=(100*e).toFixed(1);return s+"+"+t+"%"}return s+"+"+e}function l(t,e){let i=a.C[t];if(!i)throw"tag name not exist";return i.percentage?(100*e).toFixed(1):e}function r(t){let e=s.oN[t];return e["flower"]?e["flower"].url:e["head"].url}function c(t,e){let i=parseFloat(e);return a.C[t].percentage?i/100:i}function o(t,e){return s.oN[t][e].chs}function u(t){switch(t){case"flower":return"生之花";case"feather":return"死之羽";case"sand":return"时之沙";case"cup":return"空之杯";case"head":return"理之冠"}}function d(t){return t.charAt(0).toUpperCase()+t.slice(1)}}}]);