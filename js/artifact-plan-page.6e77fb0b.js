"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[136],{4498:function(t,e,a){a.r(e),a.d(e,{default:function(){return Vt}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("apply-preset-dialog",{ref:"applyPresetDialog",on:{selected:function(e){return t.usePreset(e)}}}),a("el-dialog",{attrs:{title:"选择圣遗物",width:t.deviceIsPC?"80%":"90%",visible:t.showSelectArtifactDialog},on:{"update:visible":function(e){t.showSelectArtifactDialog=e}}},[a("select-artifact",{attrs:{position:t.selectArtifactSlot},on:{select:t.handleSelectArtifact}})],1),a("el-dialog",{attrs:{visible:t.showDamageAnalysisDialog,title:"伤害构成",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showDamageAnalysisDialog=e}}},[a("damage-analysis",{ref:"damageAnalysis",attrs:{"enemy-config":t.enemyConfig,"character-level":t.characterLevelNumber}})],1),a("el-dialog",{attrs:{visible:t.showSelectBuffDialog,title:"选择BUFF",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showSelectBuffDialog=e}}},[a("select-buff",{on:{select:t.handleSelectBuff}})],1),a("el-dialog",{attrs:{visible:t.showConstraintDialog,title:"算法及过滤设置",width:"60%"},on:{"update:visible":function(e){t.showConstraintDialog=e}}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("p",{staticClass:"common-title2"},[t._v(" 算法 "),a("el-tooltip",{scopedSlots:t._u([{key:"content",fn:function(){return[t._v(" A*：推荐"),a("br"),t._v(" 启发式剪枝：不保证得到最优解，但是速度快"),a("br"),t._v(" 纯枚举：不推荐 ")]},proxy:!0}])},[a("i",{staticClass:"el-icon-question",attrs:{content:""}})])],1),"Naive"===t.algorithm?a("el-alert",{staticStyle:{"margin-bottom":"12px"},attrs:{title:"请限定套装或者主词条，否则计算将十分耗时，可能导致计算超时",type:"warning"}}):t._e(),a("el-radio-group",{model:{value:t.algorithm,callback:function(e){t.algorithm=e},expression:"algorithm"}},[a("el-radio",{attrs:{label:"AStar"}},[t._v("A*")]),a("el-radio",{attrs:{label:"Heuristic"}},[t._v("启发式剪枝")]),a("el-radio",{attrs:{label:"Naive"}},[t._v("纯枚举")])],1),a("p",{staticClass:"common-title2"},[t._v("搭配数量")]),a("div",{staticStyle:{"margin-top":"12px","margin-bottom":"12px"}},[a("div",{staticStyle:{width:"70%"}},[a("el-slider",{attrs:{min:1,max:100,"show-input":!0},model:{value:t.max_result_num,callback:function(e){t.max_result_num=e},expression:"max_result_num"}})],1)]),a("p",{staticClass:"common-title2"},[t._v("限定套装")]),a("div",{staticStyle:{"margin-top":"12px","margin-bottom":"12px"}},[a("select-artifact-set",{staticStyle:{width:"50%"},attrs:{anyOption:"",multiple:""},model:{value:t.constraintArtifactSet,callback:function(e){t.constraintArtifactSet=e},expression:"constraintArtifactSet"}})],1),a("p",{staticClass:"common-title2"},[t._v("限定主词条")]),a("div",{staticStyle:{"margin-top":"12px","margin-bottom":"12px"}},[a("div",{staticClass:"constraint-main-stat-item"},[a("span",[t._v("时之沙")]),a("select-artifact-main-stat",{staticStyle:{width:"30%"},attrs:{"include-any":!1,multiple:!0,position:"sand"},model:{value:t.constraintSandMainStats,callback:function(e){t.constraintSandMainStats=e},expression:"constraintSandMainStats"}})],1),a("div",{staticClass:"constraint-main-stat-item"},[a("span",[t._v("空之杯")]),a("select-artifact-main-stat",{staticStyle:{width:"30%"},attrs:{"include-any":!1,multiple:!0,position:"cup"},model:{value:t.constraintGobletMainStats,callback:function(e){t.constraintGobletMainStats=e},expression:"constraintGobletMainStats"}})],1),a("div",{staticClass:"constraint-main-stat-item"},[a("span",[t._v("理之冠")]),a("select-artifact-main-stat",{staticStyle:{width:"30%"},attrs:{"include-any":!1,multiple:!0,position:"head"},model:{value:t.constraintHeadMainStats,callback:function(e){t.constraintHeadMainStats=e},expression:"constraintHeadMainStats"}})],1)]),a("p",{staticClass:"constraint-title"},[t._v("限定最小值")]),a("div",[a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("元素充能效率")]),a("div",{staticStyle:{width:"70%"}},[a("el-slider",{attrs:{min:1,max:4,step:.05,"show-input":!0},model:{value:t.constraintMinRecharge,callback:function(e){t.constraintMinRecharge=e},expression:"constraintMinRecharge"}})],1)]),a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("元素精通")]),a("div",{staticStyle:{width:"70%"}},[a("el-slider",{attrs:{min:0,max:2e3,step:10,"show-input":!0},model:{value:t.constraintMinElementalMastery,callback:function(e){t.constraintMinElementalMastery=e},expression:"constraintMinElementalMastery"}})],1)]),a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("暴击率")]),a("div",{staticStyle:{width:"70%"}},[a("el-slider",{attrs:{min:0,max:1,step:.01,"show-input":!0},model:{value:t.constraintMinCritical,callback:function(e){t.constraintMinCritical=e},expression:"constraintMinCritical"}})],1)]),a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("暴击伤害")]),a("div",{staticStyle:{width:"70%"}},[a("el-slider",{attrs:{min:0,max:4,step:.1,"show-input":!0},model:{value:t.constraintMinCriticalDamage,callback:function(e){t.constraintMinCriticalDamage=e},expression:"constraintMinCriticalDamage"}})],1)])])],1),a("el-col",{attrs:{span:9}},[a("p",{staticClass:"common-title2"},[t._v("过滤圣遗物组")]),a("div",{staticClass:"mona-scroll",staticStyle:{"max-height":"50vh",overflow:"auto"}},[a("el-tree",{ref:"filterKumiRef",attrs:{data:t.kumiTreeDataForElementUI,"show-checkbox":""}})],1)])],1)],1),a("el-dialog",{attrs:{visible:t.showArtifactAnalysisDialog,title:"词条统计",width:"60%"},on:{"update:visible":function(e){t.showArtifactAnalysisDialog=e}}},[a("artifacts-set-statistics",{attrs:{"artifact-ids":t.artifactIds}})],1),a("el-dialog",{attrs:{visible:t.showArtifactPerBonusDialog,title:"词条收益曲线",width:t.deviceIsPC?"80%":"90%"},on:{"update:visible":function(e){t.showArtifactPerBonusDialog=e}}},[a("artifact-per-stat-bonus",{attrs:{data:t.miscPerStatBonus}})],1),a("el-dialog",{attrs:{visible:t.showSaveKumiDialog,title:"新建圣遗物组",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showSaveKumiDialog=e}}},[a("save-as-kumi",{attrs:{"default-name":t.kumiDefaultName},on:{confirm:t.handleSaveAsKumi}})],1),a("el-dialog",{attrs:{visible:t.showUseKumiDialog,title:"选择圣遗物组",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showUseKumiDialog=e}}},[a("div",{staticClass:"mona-scroll",staticStyle:{height:"60vh"}},[a("el-tree",{attrs:{data:t.kumiTreeDataForElementUI},on:{"node-click":t.handleUseKumi}})],1)]),a("el-dialog",{attrs:{visible:t.showEnemyConfigDialog,title:"敌人设置",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showEnemyConfigDialog=e}}},[a("enemy-config",{model:{value:t.enemyConfig,callback:function(e){t.enemyConfig=e},expression:"enemyConfig"}})],1),a("el-dialog",{attrs:{visible:t.showConfigArtifactDialog,title:"圣遗物设置",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showConfigArtifactDialog=e}}},[a("h3",{staticClass:"common-title2"},[t._v("圣遗物特效模式")]),a("el-radio-group",{model:{value:t.artifactEffectMode,callback:function(e){t.artifactEffectMode=e},expression:"artifactEffectMode"}},[a("el-radio",{attrs:{label:"auto"}},[t._v("自动")]),a("el-radio",{attrs:{label:"custom"}},[t._v("手动")])],1),a("h3",{staticClass:"common-title2"},[t._v("圣遗物特效（仅在手动模式下有效）")]),a("artifact-config",{model:{value:t.artifactConfig,callback:function(e){t.artifactConfig=e},expression:"artifactConfig"}})],1),a("div",{ref:"topThings",staticClass:"top-things"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",[t._v("计算器")])]),a("el-col",{attrs:{span:18}},[a("div",{staticStyle:{float:"right"}},[t.cancelOptimizeArtifact?[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-warning-outline"},on:{click:t.cancelOptimizeArtifact}},[t._v("中止计算")]),a("el-divider",{attrs:{direction:"vertical"}})]:t._e(),t.miscCurrentPresetName?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-folder-checked",disabled:!t.presetDirty},on:{click:function(e){return t.handleSavePreset(t.miscCurrentPresetName)}}},[t._v("保存预设「"+t._s(t.miscCurrentPresetName)+"」")]):t._e(),a("el-button",{attrs:{type:t.miscCurrentPresetName?"secondary":"primary",size:"mini",icon:"el-icon-folder-add"},on:{click:function(e){return t.handleSavePreset(null)}}},[t._v("存为新预设")]),a("el-button",{attrs:{type:"secondary",size:"mini",icon:"el-icon-folder-opened"},on:{click:function(e){return t.$refs.applyPresetDialog.open()}}},[t._v("导入预设")])],2)])],1),a("el-divider")],1),a("el-row",{ref:"bigContainer",staticClass:"big-container"},[a("el-col",{staticClass:"left-container mona-scroll-hidden",attrs:{sm:24,md:6}},[a("div",{staticClass:"config-character"},[a("img",{staticClass:"character-splash",attrs:{src:t.characterSplash}}),a("div",{staticClass:"select-character"},[a("p",{staticClass:"common-title"},[t._v("角色")]),a("div",{staticStyle:{display:"flex",gap:"12px"}},[a("select-character",{staticStyle:{flex:"1"},attrs:{value:t.characterName},on:{input:t.changeCharacter}}),a("select-character-level",{staticStyle:{flex:"1"},model:{value:t.characterLevel,callback:function(e){t.characterLevel=e},expression:"characterLevel"}})],1),a("div",{staticClass:"config-character-skill"},[a("h3",{staticClass:"common-title2"},[t._v("技能")]),a("div",{staticClass:"skill-div"},[a("el-input-number",{staticStyle:{flex:"1",display:"block",width:"unset"},attrs:{size:"mini",min:1,max:15},model:{value:t.characterSkill1,callback:function(e){t.characterSkill1=e},expression:"characterSkill1"}}),a("el-input-number",{staticStyle:{flex:"1",display:"block",width:"unset"},attrs:{size:"mini",min:1,max:15},model:{value:t.characterSkill2,callback:function(e){t.characterSkill2=e},expression:"characterSkill2"}}),a("el-input-number",{staticStyle:{flex:"1",display:"block",width:"unset"},attrs:{size:"mini",min:1,max:15},model:{value:t.characterSkill3,callback:function(e){t.characterSkill3=e},expression:"characterSkill3"}})],1)]),a("div",{staticClass:"config-character-constellation"},[a("h3",{staticClass:"common-title2"},[t._v("命之座")]),a("select-small-int",{attrs:{min:0,max:6},model:{value:t.characterConstellation,callback:function(e){t.characterConstellation=e},expression:"characterConstellation"}})],1),t.characterNeedConfig?a("div",{staticClass:"character-extra-config"},[a("item-config",{attrs:{"item-name":t.characterName,configs:t.characterConfigConfig},model:{value:t.characterConfig,callback:function(e){t.characterConfig=e},expression:"characterConfig"}})],1):t._e()])]),a("el-divider"),a("div",{staticClass:"config-weapon"},[a("div",{staticClass:"select-weapon"},[a("p",{staticClass:"common-title"},[t._v("武器")]),a("div",{staticStyle:{display:"flex",gap:"12px","margin-bottom":"8px"}},[a("select-weapon",{staticStyle:{flex:"1"},attrs:{type:t.characterWeaponType,value:t.weaponName},on:{input:t.changeWeapon}}),a("select-weapon-level",{staticStyle:{flex:"1"},model:{value:t.weaponLevel,callback:function(e){t.weaponLevel=e},expression:"weaponLevel"}})],1),a("weapon-display",{attrs:{"weapon-name":t.weaponName}}),a("div",{staticClass:"config-weapon-refine"},[a("h3",{staticClass:"common-title2"},[t._v("精炼")]),a("select-small-int",{attrs:{min:1,max:5},model:{value:t.weaponRefine,callback:function(e){t.weaponRefine=e},expression:"weaponRefine"}})],1),t.weaponNeedConfig?a("div",{staticClass:"weapon-extra-config"},[a("item-config",{attrs:{"item-name":t.weaponName,configs:t.weaponConfigConfig},model:{value:t.weaponConfig,callback:function(e){t.weaponConfig=e},expression:"weaponConfig"}})],1):t._e()],1)]),a("el-divider"),a("div",{staticClass:"config-target-function"},[a("p",{staticClass:"common-title"},[t._v("目标函数")]),a("el-tabs",{model:{value:t.miscTargetFunctionTab,callback:function(e){t.miscTargetFunctionTab=e},expression:"miscTargetFunctionTab"}},[a("el-tab-pane",{attrs:{label:"普通",name:"normal"}},[a("select-target-function",{attrs:{value:t.targetFunctionName,"character-name":t.characterName},on:{input:t.changeTargetFunction}}),t.targetFunctionNeedConfig?a("div",{staticClass:"target-function-config",staticStyle:{"margin-top":"12px"}},[a("item-config",{attrs:{"item-name":t.targetFunctionName,configs:t.targetFunctionConfigConfig},model:{value:t.targetFunctionConfig,callback:function(e){t.targetFunctionConfig=e},expression:"targetFunctionConfig"}})],1):t._e(),a("div",{staticClass:"target-function-detail"},[a("div",{staticClass:"detail-left"},[a("img",{attrs:{src:t.targetFunctionBadge}})]),a("div",{staticClass:"detail-right"},[a("p",{staticClass:"target-function-description",domProps:{innerHTML:t._s(t.targetFunctionDescription)}})])])],1),a("el-tab-pane",{attrs:{label:"MONA-DSL",name:"dsl"}},[a("el-alert",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"warning",title:"该功能为测试版",closable:!1}}),a("el-input",{staticClass:"code-input",attrs:{type:"textarea",rows:10,placeholder:"代码"},model:{value:t.targetFunctionDSLSource,callback:function(e){t.targetFunctionDSLSource=e},expression:"targetFunctionDSLSource"}})],1)],1)],1),a("el-divider"),a("div",{staticClass:"config-buff"},[a("p",{staticClass:"common-title"},[t._v("BUFF")]),a("div",{staticClass:"buff-tool",staticStyle:{"margin-bottom":"12px"}},[a("my-button-1",{attrs:{icon:"el-icon-plus",title:"添加BUFF"},on:{click:t.handleClickAddBuff}})],1),t.buffs.length>0?a("div",{staticClass:"buffs"},t._l(t.buffs,(function(e){return a("buff-item",{key:e.id,attrs:{buff:e,"buff-config":e.config},on:{"update:buffConfig":function(a){return t.$set(e,"config",a)},"update:buff-config":function(a){return t.$set(e,"config",a)},delete:function(a){return t.handleClickDeleteBuff(e.id)},toggle:function(a){return t.handleClickToggleBuff(e.id)}}})})),1):a("div",[a("el-empty",{attrs:{description:"无BUFF"}})],1)])],1),a("el-col",{staticClass:"middle-container",attrs:{span:9}},[a("div",{staticClass:"my-button-list",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-caret-right"},on:{click:t.handleOptimizeArtifact}},[t._v("开始搭配")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-s-tools",type:"text"},on:{click:t.handleClickSetupOptimization}},[t._v("算法及过滤设置")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-s-help",type:"text"},on:{click:t.handleClickArtifactConfig}},[t._v("圣遗物特效设置")])],1),a("p",{staticClass:"common-title"},[t._v("圣遗物")]),t.optimizationResults.length>0?a("div",{staticStyle:{"margin-top":"12px","margin-bottom":"12px"}},[a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title",staticStyle:{"font-size":"0.9rem"}},[t._v("搭配结果")]),a("div",{staticStyle:{width:"100%"}},[a("el-slider",{attrs:{value:t.optimizationResultIndex,min:1,max:t.optimizationResults.length,"show-input":!0,"show-stops":""},on:{input:t.handleUseNthOptimizationResult}})],1)]),a("value-display",{staticStyle:{"margin-top":"12px"},attrs:{value:t.optimizationResults[t.optimizationResultIndex-1].ratio,extra:t.optimizationResults[t.optimizationResultIndex-1].value.toFixed(1)}})],1):t._e(),a("div",{staticClass:"artifact-tool",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-pie-chart"},on:{click:t.handleClickArtifactAnalysis}},[t._v("词条统计")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-data-line"},on:{click:t.handleClickAttributeAnalysis}},[t._v("词条收益")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-star-on"},on:{click:t.handleClickSaveAsKumi}},[t._v("存为套装")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-folder"},on:{click:t.handleClickUseKumi}},[t._v("导入套装")])],1),a("div",[a("el-tabs",{staticStyle:{width:"100%"},attrs:{type:"card",addable:""},on:{edit:t.handleArtifactTabsEdit},model:{value:t.currentArtifactGroupName,callback:function(e){t.currentArtifactGroupName=e},expression:"currentArtifactGroupName"}},t._l(t.artifactGroups,(function(e,i){return a("el-tab-pane",{key:e.name,staticClass:"artifacts",staticStyle:{width:"100%"},attrs:{name:e.name,label:"圣遗物组"+(i+1),closable:t.artifactGroups.length>1,lazy:""}},t._l(t.artifactIds,(function(e,i){return a("div",{key:e,staticClass:"artifact-item-or-button"},[t.artifactItems[i]?a("artifact-display",{staticClass:"artifact-display",attrs:{item:t.artifactItems[i],selectable:"",buttons:!0,"delete-button":!0},on:{delete:function(e){return t.handleRemoveArtifact(i)},toggle:function(a){return t.handleToggleArtifact(e)},click:function(e){return t.handleGotoSelectArtifact(i)}}}):a("add-button",{staticClass:"add-button",staticStyle:{height:"7vw",width:"11vw"},on:{click:function(e){return t.handleGotoSelectArtifact(i)}}})],1)})),0)})),1),t.artifactNeedConfig4?a("div",{staticStyle:{"margin-top":"16px"}},[a("p",{staticClass:"common-description"},[a("span",{staticClass:"effect4"},[t._v("四件套效果：")]),a("span",{domProps:{innerHTML:t._s(t.artifactEffect4Text)}})]),a("item-config",{attrs:{"item-name":t.artifactConfig4ItemName,configs:t.artifactConfig4Configs},model:{value:t.artifactSingleConfig,callback:function(e){t.artifactSingleConfig=e},expression:"artifactSingleConfig"}})],1):t._e()],1)]),a("el-col",{staticClass:"right-container",attrs:{span:9}},[a("div",{staticClass:"common-title"},[t._v("面板")]),a("attribute-panel",{attrs:{attribute:t.attributeFromWasm}}),a("el-divider"),a("p",{staticClass:"common-title"},[t._v("伤害")]),a("div",{staticClass:"my-button-list",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:t.handleDisplayAnalysis}},[t._v("明细")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-s-tools"},on:{click:t.handleClickEnemyConfig}},[t._v("敌人设置")])],1),t.characterNeedSkillConfig?a("div",{staticStyle:{"margin-bottom":"16px"}},[a("item-config",{attrs:{"item-name":t.characterName,configs:t.characterSkillConfigConfig},model:{value:t.characterSkillConfig,callback:function(e){t.characterSkillConfig=e},expression:"characterSkillConfig"}})],1):t._e(),a("div",{staticClass:"damage-analysis-div"},[a("select-character-skill",{staticStyle:{"margin-bottom":"16px"},attrs:{"character-name":t.characterName},model:{value:t.characterSkillIndex,callback:function(e){t.characterSkillIndex=e},expression:"characterSkillIndex"}}),a("damage-panel",{attrs:{"analysis-from-wasm":t.characterDamageAnalysis}})],1),a("h3",{staticClass:"common-title2",staticStyle:{"margin-top":"24px"}},[t._v("剧变反应伤害")]),a("transformative-damage",{attrs:{data:t.characterTransformativeDamage}})],1)],1)],1)},n=[],s=(a(3948),a(6699),a(1817),a(6250)),r=a(705),l=a.n(r),c=a(6436),o=a(9849),f=a(2432),u=a(9024),h=a(1580),m=a(2027),d=a(2961),p=a(778),g=a(1461),v=a(8600),C=a(5648),S=a(8140),b=(a(2347),a(8722)),y=a(5925),_=a(4797),k=a(7451),w=a(1741),x=a(1434),A=a(8622),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,placeholder:"目标函数",size:"small"},on:{input:function(e){return t.$emit("input",e)}}},[t.characterTargetFunctionList&&t.characterTargetFunctionList.length>0?a("el-option-group",{attrs:{label:"角色专属"}},t._l(t.characterTargetFunctionList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"option-root"},[a("img",{staticClass:"option-badge",attrs:{src:e.badge}}),a("div",{staticClass:"option-body"},[a("p",{staticClass:"option-title"},[t._v(t._s(e.chs))])])])])})),1):t._e(),t.commonTargetFunctionList?a("el-option-group",{attrs:{label:"通用"}},t._l(t.commonTargetFunctionList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"option-root"},[a("img",{staticClass:"option-badge",attrs:{src:e.badge}}),a("div",{staticClass:"option-body"},[a("p",{staticClass:"option-title"},[t._v(t._s(e.chs))])])])])})),1):t._e()],1)},F=[],I={name:"SelectTargetFunction",props:{value:{},characterName:{default:"Amber"}},data(){return{commonTargetFunctionList:p.e.common}},computed:{characterTargetFunctionList(){var t;return null!==(t=p.e[this.characterName])&&void 0!==t?t:[]}},watch:{}},D=I,M=a(1001),T=(0,M.Z)(D,N,F,!1,null,"584768dd",null),z=T.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader",{staticStyle:{width:"61.8%"},attrs:{value:t.value,options:t.options,props:{expandTrigger:"hover",emitPath:!1},size:"small"},on:{change:function(e){return t.$emit("input",e)}}})},P=[],B={name:"SelectCharacterSkill",props:["characterName","value"],computed:{options(){const t=m.O[this.characterName],e=[];for(let a=0;a<3;a++){const i=a+1,n=t[`skillMap${i}`];n.length>0&&e.push({label:t[`skillName${i}`],value:t[`skillName${i}`],children:n.map((t=>({label:t.chs,value:t.index})))})}return e}}},L=B,E=(0,M.Z)(L,$,P,!1,null,null,null),G=E.exports,W=a(1769),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:t.handleClickLevel}},[a("div",{},t._l(t.max-t.min+1,(function(e){return a("span",{key:e,staticClass:"select-small-int",class:{active:e+t.min-1===t.value}},[t._v(t._s(e+t.min-1))])})),0)])},R=[],Z={name:"SelectSmallInt",props:{value:{type:Number},min:{type:Number},max:{type:Number}},methods:{handleClickLevel(t){if(!t.target.classList.contains("select-small-int"))return;let e=t.target.textContent;this.$emit("input",Number(e))}},computed:{}},U=Z,K=(0,M.Z)(U,O,R,!1,null,"224c4694",null),H=K.exports,V=a(6370),j=a(2691),J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{data:t.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"name",label:"类型"}}),a("el-table-column",{attrs:{prop:"expectation",label:"期望伤害"}}),a("el-table-column",{attrs:{prop:"critical",label:"暴击伤害"}}),a("el-table-column",{attrs:{prop:"nonCritical",label:"非暴击伤害"}})],1)],1)},q=[],Y={name:"DamageList",props:{analysisFromWasm:{}},data(){return{showDialog:!1}},methods:{},computed:{tableData(){const t=this.analysisFromWasm;if(!t)return[];const e=Math.round,a=[];if(this.analysisFromWasm.normal){let i;if(this.analysisFromWasm.is_heal)i="治疗";else{const e={Pyro:"火元素伤害",Hydro:"水元素伤害",Electro:"雷元素伤害",Cryo:"冰元素伤害",Dendro:"草元素伤害",Geo:"岩元素伤害",Anemo:"风元素伤害",Physical:"物理伤害"};i=e[t.element]}a.push({expectation:e(this.analysisFromWasm.normal.expectation),critical:e(this.analysisFromWasm.normal.critical),nonCritical:e(this.analysisFromWasm.normal.non_critical),name:i})}return this.analysisFromWasm.melt&&a.push({expectation:e(this.analysisFromWasm.melt.expectation),critical:e(this.analysisFromWasm.melt.critical),nonCritical:e(this.analysisFromWasm.melt.non_critical),name:"融化"}),this.analysisFromWasm.vaporize&&a.push({expectation:e(this.analysisFromWasm.vaporize.expectation),critical:e(this.analysisFromWasm.vaporize.critical),nonCritical:e(this.analysisFromWasm.vaporize.non_critical),name:"蒸发"}),a}}},Q=Y,X=(0,M.Z)(Q,J,q,!1,null,"9318c0d2",null),tt=X.exports,et=a(9690),at=a(8618),it=a(6510),nt=a(3600),st=a(8606),rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"title"},[t._v("选择收藏夹")]),a("el-checkbox-group",{attrs:{min:1},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.directories,(function(e){return a("el-checkbox",{key:e.id,staticClass:"dir-item",attrs:{label:e.id,border:""}},[t._v(t._s(e.title))])})),1),a("p",{staticClass:"title"},[t._v("名称")]),a("el-input",{attrs:{placeholder:"输入名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("div",{staticClass:"buttons",staticStyle:{"text-align":"right","margin-top":"32px"}},[a("el-button",{attrs:{type:"primary",disabled:""===t.name},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1)},lt=[],ct={name:"SaveAsKumi",props:{defaultName:{type:String,default:""}},data(){return{name:this.defaultName,checkList:[0]}},watch:{defaultName(t){this.name=t}},methods:{getCheckedDirIds(){const t=this.$refs["checkbox"];if(!t)return[];let e=new Set;for(let a of t)a.isChecked&&e.add(a.$attrs["x-id"]);return Array.from(e)},handleConfirm(){const t=this.checkList;this.$emit("confirm",{dirIds:t,name:this.name})}},computed:{...(0,s.mapGetters)("kumi",["directories","dirNames"])}},ot=ct,ft=(0,M.Z)(ot,rt,lt,!1,null,"873df7ea",null),ut=ft.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{data:t.tableDataForElementUI,size:"small"}},[a("el-table-column",{attrs:{prop:"chs",label:"类型"}}),a("el-table-column",{attrs:{label:"伤害"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return["感电"===i.chs?a("span",{staticStyle:{color:"#c250ff"}},[t._v(t._s(i.value.toFixed(1)))]):"超载"===i.chs?a("span",{staticStyle:{color:"#ff335a"}},[t._v(t._s(i.value.toFixed(1)))]):a("span",[t._v(t._s(i.value.toFixed(1)))])]}}])})],1)},mt=[],dt={name:"TransformativeDamage",props:["data"],computed:{tableDataForElementUI(){if(!this.data)return[];let t=[];return t.push({chs:"感电",value:this.data.electro_charged}),t.push({chs:"超载",value:this.data.overload}),t.push({chs:"碎冰",value:this.data.shatter}),t.push({chs:"超导",value:this.data.superconduct}),t.push({chs:"扩散（雷）",value:this.data.swirl_electro}),t.push({chs:"扩散（火）",value:this.data.swirl_pyro}),t.push({chs:"扩散（冰）",value:this.data.swirl_cryo}),t.push({chs:"扩散（水）",value:this.data.swirl_hydro}),t}}},pt=dt,gt=(0,M.Z)(pt,ht,mt,!1,null,"f4737b70",null),vt=gt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{staticClass:"back",style:t.styleForBack}),a("span",{staticClass:"display"},[t.extra?a("span",[t._v(t._s(t.extra)+" /")]):t._e(),t._v(" "+t._s((100*t.value).toFixed(1))+"% ")])])},St=[],bt={name:"ValueDisplay",props:{value:{},extra:{default:""}},computed:{styleForBack(){return{width:100*this.value+"%"}}}},yt=bt,_t=(0,M.Z)(yt,Ct,St,!1,null,"5d671273",null),kt=_t.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("等级")]),a("el-input-number",{attrs:{value:t.value.level,min:60,max:100,size:"small"},on:{input:function(e){return t.handleInput("level",e)}}})],1),t._l(t.resNames,(function(e){return a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v(t._s(e.title))]),a("el-slider",{staticClass:"input",attrs:{value:t.value[e.name],min:-1,max:1,step:.1,"show-input":!0},on:{input:function(a){return t.handleInput(e.name,a)}}})],1)}))],2)},xt=[];const At=[{name:"electro_res",title:"雷抗"},{name:"pyro_res",title:"火抗"},{name:"hydro_res",title:"水抗"},{name:"cryo_res",title:"冰抗"},{name:"geo_res",title:"岩抗"},{name:"anemo_res",title:"风抗"},{name:"dendro_res",title:"草抗"},{name:"physical_res",title:"物抗"}];Object.freeze(At);var Nt={name:"EnemyConfig",props:["value"],created(){this.resNames=At},methods:{handleInput(t,e){let a=Object.assign({},this.value);a[t]=e,this.$emit("input",a)}}},Ft=Nt,It=(0,M.Z)(Ft,wt,xt,!1,null,"fee65528",null),Dt=It.exports,Mt=a(4182),Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticStyle:{"margin-bottom":"16px"},attrs:{size:"medium",placeholder:"搜索",clearable:""},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}},[a("template",{slot:"append"},[a("i",{staticClass:"el-icon-search"})])],2),a("div",{staticClass:"config-items mona-scroll"},t._l(t.dataSearched,(function(e){return a("div",{key:e.name,staticClass:"item"},[a("div",{staticClass:"top"},[a("img",{staticClass:"image",attrs:{src:e.thumbnail}}),a("div",[a("h3",{staticClass:"artifact-title"},[t._v(t._s(e.chs))]),a("p",{staticStyle:{"font-size":"12px"}},[a("span",{staticClass:"effect-title"},[t._v("四件套：")]),a("span",[t._v(t._s(e.effect4))])])])]),a("item-config",{attrs:{value:t.value[e.snake],configs:e.config4,"need-item-name":!1},on:{input:function(a){return t.handleChangeValue(e.snake,a)}}})],1)})),0)],1)},zt=[],$t=(a(4916),a(1289)),Pt=a.n($t),Bt={name:"ArtifactConfig",components:{ItemConfig:it.Z},props:["value"],data(){return{searchString:""}},computed:{data(){let t=[];for(let a in v.oN){var e;const i=v.oN[a],n=null!==(e=i.config4)&&void 0!==e?e:[],s=i.name2;n.length>0&&t.push({name:s,snake:"config_"+(0,u.D1)(s),config4:n,effect4:i.effect4,thumbnail:(0,o.dd)(a),chs:i.chs})}return t},dataSearched(){if(""===this.searchString)return this.data;{const t=new(Pt())(this.data,{keys:["chs","effect4"]}),e=t.search(this.searchString);return e.map((t=>t.item))}}},methods:{handleChangeValue(t,e){let a=(0,u.p$)(this.value);a[t]=e,this.$emit("input",a)}}},Lt=Bt,Et=(0,M.Z)(Lt,Tt,zt,!1,null,"90244e02",null),Gt=Et.exports,Wt=a(3686);let Ot=!1,Rt=0;function Zt(){return{name:String(Rt++),ids:[-1,-2,-3,-4,-5],singleConfig:null}}var Ut={name:"NewArtifactPlanPage",components:{SelectArtifactMainStat:Mt.Z,SelectArtifact:y.Z,SelectArtifactSet:_.Z,SelectCharacter:k.Z,SelectCharacterLevel:w.Z,SelectCharacterSkill:G,SelectWeapon:x.Z,SelectWeaponLevel:A.Z,SelectTargetFunction:z,SelectBuff:W.Z,SelectSmallInt:H,ArtifactDisplay:V.Z,AddButton:j.Z,DamagePanel:tt,MyButton1:et.Z,DamageAnalysis:()=>a.e(162).then(a.bind(a,5162)),AttributePanel:at.Z,ItemConfig:it.Z,BuffItem:nt.Z,WeaponDisplay:st.Z,ArtifactsSetStatistics:()=>a.e(747).then(a.bind(a,7747)),ArtifactPerStatBonus:()=>a.e(237).then(a.bind(a,2237)),SaveAsKumi:ut,TransformativeDamage:vt,ValueDisplay:kt,EnemyConfig:Dt,ArtifactConfig:Gt,ApplyPresetDialog:Wt.Z},created(){},data(){const t=[Zt(),Zt()];return{deviceIsPC:b.B,characterName:"Amber",characterLevel:"90",characterConfig:"NoConfig",characterSkillConfig:"NoConfig",characterSkillIndex:0,characterSkill1:8,characterSkill2:8,characterSkill3:8,characterConstellation:0,characterWeaponType:"Bow",weaponName:"PolarStar",weaponLevel:"90",weaponRefine:1,weaponConfig:{PolarStar:{stack:1}},constraintArtifactSet:[],constraintSandMainStats:[],constraintGobletMainStats:[],constraintHeadMainStats:[],algorithm:"AStar",max_result_num:5,constraintMinRecharge:1,constraintMinElementalMastery:0,constraintMinCritical:0,constraintMinCriticalDamage:0,enemyConfig:{level:90,electro_res:.1,pyro_res:.1,hydro_res:.1,cryo_res:.1,geo_res:.1,anemo_res:.1,dendro_res:.1,physical_res:.1},buffs:[],targetFunctionName:"AmberDefault",targetFunctionConfig:"NoConfig",targetFunctionUseDSL:!1,targetFunctionDSLSource:"",optimizationResults:[],optimizationResultIndex:0,cancelOptimizeArtifact:null,artifactGroups:t,currentArtifactGroupName:t[0].name,artifactConfig:(0,o.s)(),artifactEffectMode:"auto",selectArtifactSlot:"any",showSelectArtifactDialog:!1,showDamageAnalysisDialog:!1,showSelectBuffDialog:!1,showConstraintDialog:!1,showArtifactAnalysisDialog:!1,showArtifactPerBonusDialog:!1,showSaveKumiDialog:!1,showUseKumiDialog:!1,showEnemyConfigDialog:!1,showConfigArtifactDialog:!1,miscPerStatBonus:{},miscCurrentPresetName:null,characterDamageAnalysis:null,characterTransformativeDamage:null,savedPresetHash:null,miscTargetFunctionTab:"normal"}},computed:{...(0,s.mapGetters)({artifactsById:"artifacts/artifactsById",allArtifactsFlat:"artifacts/allFlat"}),...(0,s.mapGetters)("kumi",{kumiTreeDataForElementUI:"treeDataForElementUI"}),...(0,s.mapGetters)("presets",{presetsAllFlat:"allFlat"}),enemyInterface(){return this.enemyConfig},kumiDefaultName(){let t=m.O[this.characterName].chs;for(const e in this.artifactSetCount)this.artifactSetCount[e]>=2&&(t+="-"+v.oN[e].chs);return t},presetDefaultName(){const t=m.O[this.characterName].chs,e=d.G[this.weaponName].chs;return`${t}-${e}`},characterLevelNumber(){return parseInt(this.characterLevel)},characterAscend(){return this.characterLevel.includes("+")},characterSplash(){const t=m.O[this.characterName];return t.splash},characterNeedConfig(){let t=m.O[this.characterName].config;return t&&t.length>0},characterConfigConfig(){return m.O[this.characterName].config},characterNeedSkillConfig(){let t=m.O[this.characterName].configSkill;return t&&t.length>0},characterSkillConfigConfig(){return m.O[this.characterName].configSkill},characterInterface(){let t={name:this.characterName,level:this.characterLevelNumber,ascend:this.characterAscend,constellation:this.characterConstellation,skill1:this.characterSkill1-1,skill2:this.characterSkill2-1,skill3:this.characterSkill3-1,params:this.characterConfig};return t},characterSkillInterface(){return{index:this.characterSkillIndex,config:this.characterSkillConfig}},weaponLevelNumber(){return parseInt(this.weaponLevel)},weaponAscend(){return this.weaponLevel.includes("+")},weaponSplash(){var t,e;const a=d.G[this.weaponName];return null!==(t=null!==(e=a.gacha)&&void 0!==e?e:a.url)&&void 0!==t?t:a.tn},weaponNeedConfig(){return!!d.G[this.weaponName].configs},weaponConfigConfig(){return d.G[this.weaponName].configs},weaponInterface(){return{name:this.weaponName,level:this.weaponLevelNumber,ascend:this.weaponAscend,refine:this.weaponRefine,params:this.weaponConfig}},targetFunctionBadge(){return p.F[this.targetFunctionName].badge},targetFunctionDescription(){return p.F[this.targetFunctionName].description},targetFunctionInterface(){const t="dsl"===this.miscTargetFunctionTab;return{name:this.targetFunctionName,params:this.targetFunctionConfig,use_dsl:t,dsl_source:t?this.targetFunctionDSLSource:""}},targetFunctionNeedConfig(){const t=p.F[this.targetFunctionName].config;return t&&t.length>0},targetFunctionConfigConfig(){return p.F[this.targetFunctionName].config},artifactGroup(){return this.artifactGroups.find((t=>t.name===this.currentArtifactGroupName))},artifactIds:{get(){return this.artifactGroup.ids},set(t){this.artifactGroup.ids=t}},artifactItems(){let t=[];for(let e of this.artifactIds)this.artifactsById[e]?t.push(this.artifactsById[e]):t.push(null);return t},artifactWasmFormat(){let t=[];for(let e of this.artifactIds)if(-1!==e){const a=this.$store.getters["artifacts/artifactsById"][e];if(a&&!a.omit){const e=(0,c.Lz)(a);t.push(e)}}return t},artifactSetCount(){let t={};for(let e of this.artifactItems){if(!e)continue;const a=e.setName;Object.prototype.hasOwnProperty.call(t,a)||(t[a]=0),t[a]+=1}return t},artifactNeedConfig4(){for(let t in this.artifactSetCount){const e=this.artifactSetCount[t];if(e>=4){const e=v.oN[t];if(e.config4&&e.config4.length>0)return t}}return null},artifactConfig4ItemName(){const t=(0,c.aA)(this.artifactNeedConfig4);return`config_${(0,u.D1)(t)}`},artifactEffect4Text(){if(!this.artifactNeedConfig4)return"";const t=v.oN[this.artifactNeedConfig4];return t.effect4},artifactConfig4Configs(){if(this.artifactNeedConfig4){const t=v.oN[this.artifactNeedConfig4];return t.config4}return[]},artifactSingleConfig:{get(){return this.artifactGroup.singleConfig},set(t){this.artifactGroup.singleConfig=t}},artifactConfigForCalculator(){let t=(0,o.s)();if(this.artifactNeedConfig4){let e=this.artifactConfig4ItemName;t[e]=this.artifactSingleConfig[e]}return t},constraintSetMode(){const t=this.constraintArtifactSet.some((t=>"any"===t)),e=this.constraintArtifactSet.filter((t=>"any"!==t)).map(c.aA),a=e.length;return 2===a?{Set22:e}:1===a?t?{Set2:e[0]}:{Set4:e[0]}:"Any"},constraintInterface(){let t={set_mode:this.constraintSetMode,hp_min:null,atk_min:null,def_min:null,recharge_min:this.constraintMinRecharge,em_min:this.constraintMinElementalMastery,crit_min:this.constraintMinCritical,crit_dmg_min:this.constraintMinCriticalDamage};return t},damageAnalysisWasmInterface(){return{character:this.characterInterface,weapon:this.weaponInterface,buffs:this.buffsInterface,artifacts:this.artifactWasmFormat,artifact_config:this.artifactConfigForCalculator,skill:this.characterSkillInterface,enemy:this.enemyInterface}},getAttributeWasmInterface(){return{character:this.characterInterface,weapon:this.weaponInterface,buffs:this.buffsInterface,artifacts:this.artifactWasmFormat,artifact_config:this.artifactConfigForCalculator}},attributeFromWasm(){return this.$mona.CommonInterface.get_attribute(this.getAttributeWasmInterface)},bonusPerStatWasmInterface(){return{character:this.characterInterface,weapon:this.weaponInterface,artifacts:this.artifactWasmFormat,tf:this.targetFunctionInterface,buffs:this.buffsInterface,artifacts_config:this.artifactConfigForCalculator}},buffsUnlocked(){return this.buffs.filter((t=>!t.lock))},buffsInterface(){let t=[];for(let e of this.buffsUnlocked)t.push({name:e.name,config:e.config});return t},presetItem(){const t=this.getOptimizeArtifactWasmInterface(),e={buffs:t.buffs,character:t.character,weapon:t.weapon,targetFunction:t.target_function,constraint:{setNames:this.constraintArtifactSet,minRecharge:this.constraintMinRecharge,minCritical:this.constraintMinCritical,minCriticalDamage:this.constraintMinCriticalDamage,minElementalMastery:this.constraintMinElementalMastery},filter:{sandMainStats:this.constraintSandMainStats,gobletMainStats:this.constraintGobletMainStats,headMainStats:this.constraintHeadMainStats},artifactConfig:this.artifactConfig,algorithm:this.algorithm,max_result_num:this.max_result_num,artifactEffectMode:this.artifactEffectMode};return e},presetDirty(){const t=l()(this.presetItem);return t!==this.savedPresetHash}},methods:{changeWeapon(t){var e;if(t===this.weaponName)return;this.weaponName=t;const a=!(null===(e=d.G[t])||void 0===e||!e.configs);if(a){const e=d.G[t].configs;let a={};for(let t of e)a[t.name]=t.default;this.weaponConfig={[t]:a}}else this.weaponConfig="NoConfig"},changeTargetFunction(t){if(t===this.targetFunctionName)return;this.targetFunctionName=t;const e=p.F[t].config.length>0;if(e){let e={};for(let a of p.F[t].config)e[a.name]=a.default;this.targetFunctionConfig={[t]:e}}else this.targetFunctionConfig="NoConfig"},changeCharacter(t){if(t===this.characterName)return;this.characterName=t;const e=m.O[t].config.length>0,a=m.O[t].configSkill.length>0;if(e){const e=m.O[t].config;let a={};for(let t of e)a[t.name]=t.default;this.characterConfig={[t]:a}}else this.characterConfig="NoConfig";if(a){let e={};for(let a of m.O[t].configSkill)e[a.name]=a.default;this.characterSkillConfig={[t]:e}}else this.characterSkillConfig="NoConfig";this.characterSkillIndex=0;const i=m.O[t].weapon;if(i!==this.characterWeaponType){this.characterWeaponType=i;const t=d.k[i][0],e=t.name;this.changeWeapon(e)}const n=p.F[this.targetFunctionName];if("common"!==n["for"]){const e=p.e[t][0],a=e.name;this.changeTargetFunction(a)}},handleClickArtifactConfig(){this.showConfigArtifactDialog=!0},handleClickEnemyConfig(){this.showEnemyConfigDialog=!0},handleClickSetupOptimization(){this.showConstraintDialog=!0},useArtifacts(t){this.artifactIds=t},async usePreset(t){var e,a,i,n,s;const r=(0,h.kE)(t),c=(0,u.p$)(r.item);if(!c)return;for(let l of c.buffs){var f;l.id=null!==(f=l.id)&&void 0!==f?f:Math.floor(1e9*Math.random())}this.buffs=null!==(e=c.buffs)&&void 0!==e?e:[];const m=c.character;if(m){var d;this.changeCharacter(m.name),this.characterLevel=m.level.toString()+(m.ascend?"+":"-"),this.characterConstellation=null!==(d=m.constellation)&&void 0!==d?d:0,this.characterSkill1=m.skill1+1,this.characterSkill2=m.skill2+1,this.characterSkill3=m.skill3+1,await this.$nextTick(),this.characterConfig=m.params;const t=c.weapon;t&&(this.weaponName=t.name,this.weaponLevel=t.level.toString()+(t.ascend?"+":"-"),this.weaponRefine=t.refine,await this.$nextTick(),this.weaponConfig=t.params)}const p=c.targetFunction;p&&(this.targetFunctionName=p.name,await this.$nextTick(),this.targetFunctionConfig=p.params);const g=!!c.useDSL;var v;g?(this.miscTargetFunctionTab="dsl",this.targetFunctionDSLSource=null!==(v=c.dslSource)&&void 0!==v?v:""):this.miscTargetFunctionTab="normal";const C=c.constraint;var S;C&&(this.constraintArtifactSet=null!==(S=C.setNames)&&void 0!==S?S:[],this.constraintMinCriticalDamage=0,this.constraintMinCritical=0,this.constraintMinElementalMastery=0,this.constraintMinRecharge=1);const b=c.filter;var y,_,k;b&&(this.constraintSandMainStats=null!==(y=b.sandMainStats)&&void 0!==y?y:[],this.constraintGobletMainStats=null!==(_=b.gobletMainStats)&&void 0!==_?_:[],this.constraintHeadMainStats=null!==(k=b.headMainStats)&&void 0!==k?k:[]);this.algorithm=null!==(a=c.algorithm)&&void 0!==a?a:"AStar",this.max_result_num=null!==(i=c.max_result_num)&&void 0!==i?i:5,this.artifactEffectMode=null!==(n=c.artifactEffectMode)&&void 0!==n?n:"auto",this.artifactConfig=null!==(s=c.artifactConfig)&&void 0!==s?s:(0,o.s)(),this.miscCurrentPresetName=t,this.savedPresetHash=l()(this.presetItem)},async handleSavePreset(t){const e=(0,u.p$)(this.presetItem);if(!t){if(t=(await this.$prompt("输入名称","存为预设",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[^\s]+$/,inputValue:this.presetDefaultName})).value,(0,h.kE)(t))try{await this.$confirm("已存在该名称的预设，确定覆盖？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})}catch(a){return}this.miscCurrentPresetName=e.name=t}(0,h.y0)(e,t),this.savedPresetHash=l()(this.presetItem),this.$message.success("已保存")},handleClickSaveAsKumi(){this.showSaveKumiDialog=!0},handleSaveAsKumi({dirIds:t,name:e}){let a=this.artifactIds.filter((t=>t));for(let i of t)(0,f.GV)(i,e,a);this.showSaveKumiDialog=!1},handleClickUseKumi(){this.showUseKumiDialog=!0},handleUseKumi(t){if(Object.prototype.hasOwnProperty.call(t,"kumiId")){var e,a,i,n,s;const r=t.kumiId;this.showUseKumiDialog=!1;const l=(0,f.wJ)(r);let c={};for(let t of l){const e=this.artifactsById[t];e&&(c[e.position]=t)}let o=[];o.push(null!==(e=c.flower)&&void 0!==e?e:null),o.push(null!==(a=c.feather)&&void 0!==a?a:null),o.push(null!==(i=c.sand)&&void 0!==i?i:null),o.push(null!==(n=c.cup)&&void 0!==n?n:null),o.push(null!==(s=c.head)&&void 0!==s?s:null),this.artifactIds=o}},getAllArtifactsFiltered(){const t=this.$refs["filterKumiRef"];let e=new Set;if(t){const a=t.getCheckedNodes(!0);for(let t of a){const a=t.kumiId,i=(0,f.wJ)(a);for(let t of i)e.add(t)}}for(let i of this.allArtifactsFlat){const t=i.position,a=i.mainTag.name,n=i.id;if("sand"===t){if(this.constraintSandMainStats.length>0){const t=this.constraintSandMainStats.indexOf(a);-1===t&&e.add(n)}}else if("cup"===t){if(this.constraintGobletMainStats.length>0){const t=this.constraintGobletMainStats.indexOf(a);-1===t&&e.add(n)}}else if("head"===t&&this.constraintHeadMainStats.length>0){const t=this.constraintHeadMainStats.indexOf(a);-1===t&&e.add(n)}}let a=[];for(let i of this.allArtifactsFlat)i.lock||e.has(i.id)||a.push(i);return a.filter((t=>!t.omit))},getAllArtifactsFilteredWasm(){return this.getAllArtifactsFiltered().map((t=>(0,c.Lz)(t)))},getOptimizeArtifactWasmInterface(){let t=null;return"custom"===this.artifactEffectMode&&(t=this.artifactConfig),{character:this.characterInterface,weapon:this.weaponInterface,target_function:this.targetFunctionInterface,constraint:this.constraintInterface,buffs:this.buffsInterface,artifact_config:t,algorithm:this.algorithm,max_result_num:this.max_result_num}},getArtifactsToBeCalculated(){const t=this.getAllArtifactsFilteredWasm(),e=t.filter((t=>t.level>=16));return e},handleArtifactTabsEdit(t,e){if("add"===e){const t=Zt();this.artifactGroups.push(t),this.currentArtifactGroupName=t.name}else if("remove"===e){const e=this.artifactGroups;this.currentArtifactGroupName===t&&e.forEach(((a,i)=>{if(a.name===t){const t=e[i+1]||e[i-1];this.currentArtifactGroupName=t.name}}));const a=this.artifactGroups.findIndex((e=>e.name===t));this.artifactGroups.splice(a,1)}},handleClickArtifactAnalysis(){this.showArtifactAnalysisDialog=!0},handleOptimizeArtifact(){const t=this.$loading({target:this.$refs.bigContainer.$el,lock:!0,text:"莫娜占卜中"}),e=new Date;let[a,i]=(0,S.Y)(this.getOptimizeArtifactWasmInterface(),this.getArtifactsToBeCalculated());const n=setTimeout((()=>{this.cancelOptimizeArtifact=i}),800);a.then((t=>{const a=new Date;console.log(`time: ${(a-e)/1e3}s`),0!==t.length?(this.optimizationResults=t,this.handleUseNthOptimizationResult(1)):this.$message.error("没有符合条件的圣遗物")})).catch((t=>{this.$message.error(t)})).finally((()=>{clearTimeout(n),this.cancelOptimizeArtifact=null,t.close()}))},handleUseNthOptimizationResult(t){const e=this.optimizationResults[t-1],a=t=>null!==t?t:-1;let i=[];i.push(a(e.flower)),i.push(a(e.feather)),i.push(a(e.sand)),i.push(a(e.goblet)),i.push(a(e.head)),this.artifactIds=i,this.optimizationResultIndex=t},handleGotoSelectArtifact(t){const e=["flower","feather","sand","cup","head"],a=e[t];this.showSelectArtifactDialog=!0,this.selectArtifactSlot=a},handleSelectArtifact(t){const e={flower:0,feather:1,sand:2,cup:3,head:4},a=e[this.selectArtifactSlot];this.$set(this.artifactIds,a,t),this.showSelectArtifactDialog=!1},handleRemoveArtifact(t){this.$set(this.artifactIds,t,-1)},handleToggleArtifact(t){this.$store.commit("artifacts/toggleById",{id:t})},handleDisplayAnalysis(){this.showDamageAnalysisDialog=!0,this.$nextTick((()=>{const t=this.$refs["damageAnalysis"];t.setValue(this.characterDamageAnalysis)}))},handleClickAttributeAnalysis(){(0,C.Ax)(this.bonusPerStatWasmInterface).then((t=>{this.miscPerStatBonus=t,this.showArtifactPerBonusDialog=!0}))},handleClickAddBuff(){this.showSelectBuffDialog=!0},handleSelectBuff(t){this.showSelectBuffDialog=!1,this.addBuff(t)},handleClickDeleteBuff(t){const e=this.buffs.findIndex((e=>e.id===t));this.$delete(this.buffs,e)},handleClickToggleBuff(t){const e=this.buffs.findIndex((e=>e.id===t)),a=this.buffs[e].lock;this.$set(this.buffs[e],"lock",!a)},addBuff(t){const e=g.JK[t];let a,i={};for(let n of e.config)i[n.name]=n.default;a=0===e.config.length?"NoConfig":{[t]:i},this.buffs.push({name:t,config:a,id:Math.floor(1e9*Math.random()),lock:!1})}},watch:{artifactNeedConfig4(t){if(t){var e;const a=v.oN[t];let i={};for(let t of a.config4)i[t.name]=t.default;const n=(0,c.aA)(t),s=`config_${(0,u.D1)(n)}`;null!==(e=this.artifactSingleConfig)&&void 0!==e&&e.hasOwnProperty(s)||(this.artifactSingleConfig={[s]:i})}else this.artifactSingleConfig=null},damageAnalysisWasmInterface:{handler(){Ot=!1,this.$nextTick((()=>{Ot||(this.characterDamageAnalysis=this.$mona.CalculatorInterface.get_damage_analysis(this.damageAnalysisWasmInterface),this.characterTransformativeDamage=this.$mona.CalculatorInterface.get_transformative_damage(this.damageAnalysisWasmInterface),Ot=!0)}))},immediate:!0,deep:!0},"$store.state.accounts.currentAccountId"(){this.constraintArtifactSet=[],this.artifactGroups.unshift(Zt(),Zt()),this.currentArtifactGroupName=this.artifactGroups[0].name,this.artifactGroups.splice(2),this.optimizationResults=[],this.optimizationResultIndex=0,this.miscPerStatBonus={},this.miscCurrentPresetName=null}}},Kt=Ut,Ht=(0,M.Z)(Kt,i,n,!1,null,"b20e2fb8",null),Vt=Ht.exports}}]);